/**\n * Font Loading Utilities for Atomix Theme System\n * Provides efficient font loading strategies for all themes\n */\n\nexport interface FontConfig {\n  family: string;\n  weights: number[];\n  styles?: ('normal' | 'italic')[];\n  display?: 'auto' | 'block' | 'swap' | 'fallback' | 'optional';\n  preload?: boolean;\n}\n\nexport interface ThemeFonts {\n  primary: FontConfig;\n  secondary?: FontConfig;\n  monospace?: FontConfig;\n  display?: FontConfig;\n}\n\n/**\n * Theme-specific font configurations\n */\nexport const themeFontConfigs: Record<string, ThemeFonts> = {\n  'shaj-default': {\n    primary: {\n      family: 'Inter',\n      weights: [300, 400, 500, 600, 700, 800, 900],\n      styles: ['normal', 'italic'],\n      display: 'swap',\n      preload: true\n    },\n    monospace: {\n      family: 'JetBrains Mono',\n      weights: [300, 400, 500, 600, 700],\n      display: 'swap'\n    }\n  },\n  'flashtrade': {\n    primary: {\n      family: 'Inter',\n      weights: [300, 400, 500, 600, 700, 800, 900],\n      display: 'swap',\n      preload: true\n    },\n    secondary: {\n      family: 'Helvetica Neue',\n      weights: [100, 200, 300, 400, 500, 700],\n      display: 'swap'\n    },\n    monospace: {\n      family: 'JetBrains Mono',\n      weights: [300, 400, 500, 600, 700, 800],\n      display: 'swap'\n    }\n  },\n  'boomdevs': {\n    primary: {\n      family: 'Inter',\n      weights: [300, 400, 500, 600, 700, 800, 900],\n      display: 'swap',\n      preload: true\n    },\n    secondary: {\n      family: 'Lato',\n      weights: [300, 400, 700, 900],\n      display: 'swap'\n    },\n    monospace: {\n      family: 'JetBrains Mono',\n      weights: [300, 400, 500, 600, 700, 800],\n      display: 'swap'\n    }\n  },\n  'esrar': {\n    primary: {\n      family: 'Big Caslon FB',\n      weights: [400, 700, 900],\n      styles: ['normal', 'italic'],\n      display: 'swap',\n      preload: true\n    },\n    secondary: {\n      family: 'Filson Pro',\n      weights: [300, 400, 500, 700],\n      display: 'swap'\n    },\n    display: {\n      family: 'Playfair Display',\n      weights: [400, 500, 600, 700, 800, 900],\n      styles: ['normal', 'italic'],\n      display: 'swap'\n    }\n  },\n  'mashroom': {\n    primary: {\n      family: 'Space Grotesk',\n      weights: [300, 400, 500, 600, 700],\n      display: 'swap',\n      preload: true\n    },\n    secondary: {\n      family: 'Filson Pro',\n      weights: [100, 300, 400, 500, 700, 800, 900],\n      display: 'swap'\n    },\n    monospace: {\n      family: 'JetBrains Mono',\n      weights: [300, 400, 500, 600, 700, 800],\n      display: 'swap'\n    }\n  },\n  'applemix': {\n    primary: {\n      family: 'Inter',\n      weights: [100, 200, 300, 400, 500, 600, 700, 800, 900],\n      display: 'swap',\n      preload: true\n    },\n    secondary: {\n      family: 'Helvetica Neue',\n      weights: [100, 200, 300, 400, 500, 700],\n      display: 'swap'\n    },\n    monospace: {\n      family: 'JetBrains Mono',\n      weights: [100, 200, 300, 400, 500, 600, 700, 800],\n      display: 'swap'\n    }\n  }\n};\n\n/**\n * Generate Google Fonts URL for a theme\n */\nexport function generateGoogleFontsUrl(themeId: string): string {\n  const config = themeFontConfigs[themeId];\n  if (!config) return '';\n\n  const families: string[] = [];\n\n  Object.values(config).forEach(fontConfig => {\n    if (!fontConfig) return;\n    \n    const { family, weights, styles = ['normal'] } = fontConfig;\n    \n    // Skip local fonts\n    if (['Big Caslon FB', 'Filson Pro', 'Helvetica Neue'].includes(family)) {\n      return;\n    }\n\n    const weightStr = weights.join(';');\n    const styleStr = styles.includes('italic') ? `:ital,wght@0,${weightStr};1,${weightStr}` : `:wght@${weightStr}`;\n    \n    families.push(`${family.replace(/ /g, '+')}${styleStr}`);\n  });\n\n  if (families.length === 0) return '';\n\n  return `https://fonts.googleapis.com/css2?${families.map(f => `family=${f}`).join('&')}&display=swap`;\n}\n\n/**\n * Preload critical fonts for a theme\n */\nexport function preloadThemeFonts(themeId: string): void {\n  const config = themeFontConfigs[themeId];\n  if (!config) return;\n\n  Object.values(config).forEach(fontConfig => {\n    if (!fontConfig?.preload) return;\n\n    const link = document.createElement('link');\n    link.rel = 'preload';\n    link.as = 'font';\n    link.type = 'font/woff2';\n    link.crossOrigin = 'anonymous';\n    \n    // For Google Fonts, preload the primary weight\n    const primaryWeight = fontConfig.weights[0] || 400;\n    link.href = `https://fonts.gstatic.com/s/${fontConfig.family.toLowerCase().replace(/ /g, '')}/v1/${fontConfig.family.toLowerCase().replace(/ /g, '')}-${primaryWeight}.woff2`;\n    \n    document.head.appendChild(link);\n  });\n}\n\n/**\n * Load theme fonts dynamically\n */\nexport function loadThemeFonts(themeId: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    const googleFontsUrl = generateGoogleFontsUrl(themeId);\n    \n    if (!googleFontsUrl) {\n      resolve();\n      return;\n    }\n\n    const link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = googleFontsUrl;\n    \n    link.onload = () => resolve();\n    link.onerror = () => reject(new Error(`Failed to load fonts for theme: ${themeId}`));\n    \n    document.head.appendChild(link);\n  });\n}\n\n/**\n * Get font fallback stack for a theme\n */\nexport function getFontFallbackStack(themeId: string, type: 'primary' | 'secondary' | 'monospace' = 'primary'): string {\n  const config = themeFontConfigs[themeId];\n  if (!config?.[type]) return 'system-ui, sans-serif';\n\n  const fontConfig = config[type]!;\n  const baseStack = [\n    `'${fontConfig.family}'`,\n    'system-ui',\n    '-apple-system',\n    'BlinkMacSystemFont',\n    \"'Segoe UI'\",\n    'Roboto',\n    \"'Helvetica Neue'\",\n    'Arial'\n  ];\n\n  if (type === 'monospace') {\n    return [\n      `'${fontConfig.family}'`,\n      \"'SF Mono'\",\n      'Monaco',\n      'Menlo',\n      'Consolas',\n      \"'Liberation Mono'\",\n      \"'Courier New'\",\n      'monospace'\n    ].join(', ');\n  }\n\n  return baseStack.concat('sans-serif').join(', ');\n}\n