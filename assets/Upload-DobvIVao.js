import{j as a}from"./jsx-runtime-BjG_zV1W.js";import{r}from"./index-BVDOR7y2.js";import{U as P}from"./components-BrxBU25R.js";const x=({disabled:t=!1,maxSizeInMB:d=5,acceptedFileTypes:i=["application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/png"],multiple:_=!1,title:q="Drag and Drop files here",supportedFilesText:V="Files supported: PDF, XSLS, JPEG, PNG, Scanner",buttonText:E="Choose File",helperText:T=`Maximum size: ${d}MB`,icon:A=a.jsx("i",{className:"icon-lux-cloud-arrow-up-fill"}),onFileSelect:v,onFileUpload:N,onFileUploadComplete:y,onFileUploadError:X,className:L=""})=>{const p=r.useRef(null),[u,o]=r.useState("idle"),[w,f]=r.useState(!1),[m,j]=r.useState(null),[S,g]=r.useState(0),[D,F]=r.useState(null),[U,h]=r.useState(null),[C,b]=r.useState(null),c=r.useRef(0),z=e=>{var l;if(!((l=e.target.files)!=null&&l.length))return;const s=Array.from(e.target.files);M(s)},B=()=>{p.current&&!t&&p.current.click()},I=e=>{e.preventDefault(),e.stopPropagation(),!t&&(c.current++,c.current===1&&f(!0))},$=e=>{e.preventDefault(),e.stopPropagation(),!t&&(c.current--,c.current===0&&f(!1))},G=e=>{e.preventDefault(),e.stopPropagation()},R=e=>{var l;if(e.preventDefault(),e.stopPropagation(),t||(c.current=0,f(!1),!((l=e.dataTransfer.files)!=null&&l.length)))return;const s=Array.from(e.dataTransfer.files);M(s)},M=e=>{if(!e.length)return;const l=(_?e:[e[0]]).filter(n=>n!==void 0&&k(n));l.length&&v&&v(l),l.length&&(j(l[0]||null),l[0]&&W(l[0]))},k=e=>{const s=d*1024*1024;return e.size>s?(o("error"),h(`File too large. Maximum size is ${d}MB.`),!1):i!=null&&i.length&&!i.some(n=>{if(n.endsWith("/*")){const J=n.split("/")[0];return e.type.startsWith(`${J}/`)}return e.type===n})?(o("error"),h("File type not supported."),!1):!0},W=e=>{o("loading"),g(0);let s=0;const l=setInterval(()=>{s+=5,s<100?(g(s),F(`${Math.ceil((100-s)/5)} seconds left`),N&&N(e,s)):(clearInterval(l),o("success"),b("Upload successful"),y&&y(e))},500)},O=()=>{o("idle"),j(null),g(0),F(null),h(null),b(null)};return a.jsx("div",{className:`c-upload ${w?P.CLASSES.DRAGGING:""} ${t?P.CLASSES.DISABLED:""} ${L}`,onDragEnter:I,onDragLeave:$,onDragOver:G,onDrop:R,children:a.jsxs("div",{className:"c-upload__inner",children:[a.jsx("input",{type:"file",ref:p,className:"c-upload__input",onChange:z,disabled:t,accept:i.join(","),multiple:_}),a.jsxs("div",{className:"c-upload__drop-area",children:[a.jsx("div",{className:"c-upload__icon",children:A}),a.jsx("h3",{className:"c-upload__title",children:q}),a.jsx("p",{className:"c-upload__text",children:V}),a.jsx("button",{type:"button",className:"c-upload__button c-button",onClick:B,disabled:t,children:E}),a.jsx("p",{className:"c-upload__helper",children:T})]}),u!=="idle"&&a.jsxs("div",{className:"c-upload__status",children:[m&&a.jsxs("div",{className:"c-upload__file",children:[a.jsx("span",{className:"c-upload__file-name",children:m.name}),a.jsxs("span",{className:"c-upload__file-size",children:[(m.size/(1024*1024)).toFixed(2)," MB"]})]}),u==="loading"&&a.jsx("div",{className:"c-upload__progress",children:a.jsx("div",{className:"c-upload__progress-bar",role:"progressbar","aria-valuenow":S,"aria-valuemin":0,"aria-valuemax":100,style:{width:`${S}%`}})}),D&&a.jsx("div",{className:"c-upload__time",children:D}),u==="error"&&U&&a.jsxs("div",{className:"c-upload__error",children:[a.jsx("span",{className:"c-upload__error-icon",children:"⚠️"}),U]}),u==="success"&&C&&a.jsxs("div",{className:"c-upload__success",children:[a.jsx("span",{className:"c-upload__success-icon",children:"✓"}),C]}),a.jsx("button",{type:"button",className:"c-upload__reset",onClick:O,children:"Upload another file"})]})]})})};x.displayName="Upload";try{x.displayName="Upload",x.__docgenInfo={description:"Upload component for file uploads with drag and drop",displayName:"Upload",props:{disabled:{defaultValue:{value:"false"},description:"Whether the upload component is disabled",name:"disabled",required:!1,type:{name:"boolean"}},maxSizeInMB:{defaultValue:{value:"5"},description:"Maximum file size in MB",name:"maxSizeInMB",required:!1,type:{name:"number"}},acceptedFileTypes:{defaultValue:{value:`[
    'application/pdf',
    'application/vnd.ms-excel',
    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
    'image/jpeg',
    'image/png',
  ]`},description:"Accepted file types",name:"acceptedFileTypes",required:!1,type:{name:"string[]"}},multiple:{defaultValue:{value:"false"},description:"Whether multiple files can be selected",name:"multiple",required:!1,type:{name:"boolean"}},title:{defaultValue:{value:"Drag and Drop files here"},description:"Text for the drag and drop section",name:"title",required:!1,type:{name:"string"}},supportedFilesText:{defaultValue:{value:"Files supported: PDF, XSLS, JPEG, PNG, Scanner"},description:"Text describing supported file types",name:"supportedFilesText",required:!1,type:{name:"string"}},buttonText:{defaultValue:{value:"Choose File"},description:"Text for the upload button",name:"buttonText",required:!1,type:{name:"string"}},helperText:{defaultValue:{value:"`Maximum size: ${maxSizeInMB}MB`"},description:"Helper text displayed below the button",name:"helperText",required:!1,type:{name:"string"}},icon:{defaultValue:{value:'<i className="icon-lux-cloud-arrow-up-fill"></i>'},description:"Icon component or class name",name:"icon",required:!1,type:{name:"ReactNode"}},onFileSelect:{defaultValue:null,description:"Called when files are selected",name:"onFileSelect",required:!1,type:{name:"((files: File[]) => void)"}},onFileUpload:{defaultValue:null,description:"Called during file upload with progress",name:"onFileUpload",required:!1,type:{name:"((file: File, progress: number) => void)"}},onFileUploadComplete:{defaultValue:null,description:"Called when file upload is complete",name:"onFileUploadComplete",required:!1,type:{name:"((file: File) => void)"}},onFileUploadError:{defaultValue:null,description:"Called on file upload errors",name:"onFileUploadError",required:!1,type:{name:"((file: File, error: string) => void)"}},className:{defaultValue:{value:""},description:"Additional CSS class",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{x as U};
