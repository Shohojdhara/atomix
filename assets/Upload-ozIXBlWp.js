import{j as a}from"./jsx-runtime-BjG_zV1W.js";import{r}from"./index-BVDOR7y2.js";import{U}from"./components-BrxBU25R.js";const h=({disabled:t=!1,maxSizeInMB:u=5,acceptedFileTypes:i=["application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/png"],multiple:x=!1,title:b="Drag and Drop files here",supportedFilesText:P="Files supported: PDF, XSLS, JPEG, PNG, Scanner",buttonText:q="Choose File",helperText:M=`Maximum size: ${u}MB`,icon:V=a.jsx("i",{className:"icon-lux-cloud-arrow-up-fill"}),onFileSelect:v,onFileUpload:_,onFileUploadComplete:y,onFileUploadError:O,className:E=""})=>{const p=r.useRef(null),[d,o]=r.useState("idle"),[T,f]=r.useState(!1),[N,j]=r.useState(null),[S,m]=r.useState(0),[A,D]=r.useState(null),[J,g]=r.useState(null),[X,F]=r.useState(null),c=r.useRef(0),L=e=>{var l;if(!((l=e.target.files)!=null&&l.length))return;const s=Array.from(e.target.files);C(s)},I=()=>{p.current&&!t&&p.current.click()},B=e=>{e.preventDefault(),e.stopPropagation(),!t&&(c.current++,c.current===1&&f(!0))},$=e=>{e.preventDefault(),e.stopPropagation(),!t&&(c.current--,c.current===0&&f(!1))},w=e=>{e.preventDefault(),e.stopPropagation()},z=e=>{var l;if(e.preventDefault(),e.stopPropagation(),t||(c.current=0,f(!1),!((l=e.dataTransfer.files)!=null&&l.length)))return;const s=Array.from(e.dataTransfer.files);C(s)},C=e=>{if(!e.length)return;const l=(x?e:[e[0]]).filter(n=>n!==void 0&&G(n));l.length&&v&&v(l),l.length&&(j(l[0]||null),l[0]&&R(l[0]))},G=e=>{const s=u*1024*1024;return e.size>s?(o("error"),g(`File too large. Maximum size is ${u}MB.`),!1):i!=null&&i.length&&!i.some(n=>{if(n.endsWith("/*")){const W=n.split("/")[0];return e.type.startsWith(`${W}/`)}return e.type===n})?(o("error"),g("File type not supported."),!1):!0},R=e=>{o("loading"),m(0);let s=0;const l=setInterval(()=>{s+=5,s<100?(m(s),D(`${Math.ceil((100-s)/5)} seconds left`),_&&_(e,s)):(clearInterval(l),o("success"),F("Upload successful"),y&&y(e))},500)},k=()=>{o("idle"),j(null),m(0),D(null),g(null),F(null)};return a.jsx("div",{className:`c-upload ${T?U.CLASSES.DRAGGING:""} ${t?U.CLASSES.DISABLED:""} ${E}`,onDragEnter:B,onDragLeave:$,onDragOver:w,onDrop:z,children:a.jsxs("div",{className:"c-upload__inner",children:[a.jsx("input",{type:"file",ref:p,className:"c-upload__input",onChange:L,disabled:t,accept:i.join(","),multiple:x}),a.jsxs("div",{className:"c-upload__inner",children:[a.jsx("div",{className:"c-upload__icon",children:V}),a.jsx("h3",{className:"c-upload__title",children:b}),a.jsx("p",{className:"c-upload__text",children:P}),a.jsx("button",{type:"button",className:"c-upload__btn c-btn",onClick:I,disabled:t,children:q}),a.jsx("p",{className:"c-upload__helper-text",children:M})]}),d!=="idle"&&a.jsxs("div",{className:"c-upload__loader",style:{"--upload-loader-percentage":S},children:[N&&a.jsxs("div",{className:"c-upload__loader-status",children:[a.jsx("h5",{className:"c-upload__loader-title",children:N.name}),a.jsxs("div",{className:"c-upload__loader-progress",children:[a.jsxs("div",{className:"c-upload__loader-par",children:[S,"%"]}),a.jsx("div",{className:"c-upload__loader-time",children:A})]})]}),(d==="loading"||d==="error"||d==="success")&&a.jsxs("div",{className:"c-upload__loader-control",children:[a.jsx("div",{className:"c-upload__loader-bar",children:a.jsxs("svg",{children:[a.jsx("circle",{cx:"10",cy:"10",r:"10"}),a.jsx("circle",{cx:"10",cy:"10",r:"10"})]})}),a.jsx("button",{type:"button",className:"c-upload__loader-close c-btn",onClick:k,children:a.jsx("i",{className:"icon-lux-x"})})]})]})]})})};h.displayName="Upload";try{h.displayName="Upload",h.__docgenInfo={description:"Upload component for file uploads with drag and drop",displayName:"Upload",props:{disabled:{defaultValue:{value:"false"},description:"Whether the upload component is disabled",name:"disabled",required:!1,type:{name:"boolean"}},maxSizeInMB:{defaultValue:{value:"5"},description:"Maximum file size in MB",name:"maxSizeInMB",required:!1,type:{name:"number"}},acceptedFileTypes:{defaultValue:{value:`[
    'application/pdf',
    'application/vnd.ms-excel',
    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
    'image/jpeg',
    'image/png',
  ]`},description:"Accepted file types",name:"acceptedFileTypes",required:!1,type:{name:"string[]"}},multiple:{defaultValue:{value:"false"},description:"Whether multiple files can be selected",name:"multiple",required:!1,type:{name:"boolean"}},title:{defaultValue:{value:"Drag and Drop files here"},description:"Text for the drag and drop section",name:"title",required:!1,type:{name:"string"}},supportedFilesText:{defaultValue:{value:"Files supported: PDF, XSLS, JPEG, PNG, Scanner"},description:"Text describing supported file types",name:"supportedFilesText",required:!1,type:{name:"string"}},buttonText:{defaultValue:{value:"Choose File"},description:"Text for the upload button",name:"buttonText",required:!1,type:{name:"string"}},helperText:{defaultValue:{value:"`Maximum size: ${maxSizeInMB}MB`"},description:"Helper text displayed below the button",name:"helperText",required:!1,type:{name:"string"}},icon:{defaultValue:{value:'<i className="icon-lux-cloud-arrow-up-fill"></i>'},description:"Icon component or class name",name:"icon",required:!1,type:{name:"ReactNode"}},onFileSelect:{defaultValue:null,description:"Called when files are selected",name:"onFileSelect",required:!1,type:{name:"((files: File[]) => void)"}},onFileUpload:{defaultValue:null,description:"Called during file upload with progress",name:"onFileUpload",required:!1,type:{name:"((file: File, progress: number) => void)"}},onFileUploadComplete:{defaultValue:null,description:"Called when file upload is complete",name:"onFileUploadComplete",required:!1,type:{name:"((file: File) => void)"}},onFileUploadError:{defaultValue:null,description:"Called on file upload errors",name:"onFileUploadError",required:!1,type:{name:"((file: File, error: string) => void)"}},className:{defaultValue:{value:""},description:"Additional CSS class",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{h as U};
