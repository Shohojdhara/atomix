import{j as m}from"./jsx-runtime-BjG_zV1W.js";import{r as n,e as K}from"./index-BVDOR7y2.js";import{s as w}from"./components-BrxBU25R.js";const G=({value:s=0,maxValue:r=5,allowHalf:o=!1,readOnly:a=!1,onChange:e})=>{const c=typeof e<"u",[v,h]=n.useState(s),[E,L]=n.useState(null),[M,b]=n.useState(null),g=c?s:v,y=n.useCallback(i=>{a||L(i)},[a]),k=n.useCallback(()=>{a||L(null)},[a]),S=n.useCallback(i=>{a||(c||h(i),e==null||e(i))},[a,e,c]),j=n.useCallback((i,N)=>{if(a)return;const p=o?.5:1;let d=g;switch(i.key){case"ArrowRight":case"ArrowUp":d=Math.min(r,g+p),i.preventDefault();break;case"ArrowLeft":case"ArrowDown":d=Math.max(0,g-p),i.preventDefault();break;case"Home":d=0,i.preventDefault();break;case"End":d=r,i.preventDefault();break;case" ":case"Enter":d=N,i.preventDefault();break;default:return}d!==g&&(c||h(d),e==null||e(d))},[g,r,o,a,e,c]);return{currentValue:g,hoverValue:E,focusedIndex:M,handleMouseEnter:y,handleMouseLeave:k,handleClick:S,handleKeyDown:j,setFocused:b,setHoverValue:L,isControlled:c}};function A(s,r){typeof s=="function"?s(r):s&&(s.current=r)}function D(s,r){return K.useMemo(()=>s==null&&r==null?null:o=>{A(s,o),A(r,o)},[s,r])}const q=n.forwardRef(({value:s=0,defaultValue:r,maxValue:o=5,allowHalf:a=!1,readOnly:e=!1,size:c="md",color:v,onChange:h,className:E="",label:L,id:M,useVanillaJS:b=!1,...g},y)=>{const k=n.useRef(null),S=n.useRef(null),{currentValue:j,hoverValue:i,focusedIndex:N,setHoverValue:p,setFocused:d,handleKeyDown:V}=G({value:s!==void 0?s:r,maxValue:o,allowHalf:a,readOnly:e,onChange:h}),C=n.useCallback((f,l)=>{if(!e)if(a){const u=f.currentTarget.getBoundingClientRect(),t=u.left+u.width/2,_=f.clientX<t?l-.5:l;p(Math.max(.5,_))}else p(l)},[e,a,p]),F=n.useCallback((f,l)=>{if(e||!a)return;const u=f.currentTarget.getBoundingClientRect(),t=u.left+u.width/2,_=f.clientX<t?l-.5:l;p(Math.max(.5,_))},[e,a,p]),X=n.useCallback(()=>{e||p(null)},[e,p]),B=n.useCallback((f,l)=>{if(e)return;let u=l;if(a){const t=f.currentTarget.getBoundingClientRect(),x=t.left+t.width/2;u=f.clientX<x?l-.5:l,u=Math.max(.5,u)}h==null||h(u)},[e,h,a]);n.useEffect(()=>{if(!(!b||typeof window>"u"||!k.current))return()=>{S.current&&S.current.destroy()}},[b,s,r,o,a,e,c,v,h]),n.useEffect(()=>{!b||!S.current||S.current.updateOptions({value:s!==void 0?s:r,maxValue:o,allowHalf:a,readOnly:e,size:c,color:v})},[b,s,r,o,a,e,c,v]);const $=["c-rating",c==="sm"?w.CLASSES.SMALL:"",c==="lg"?w.CLASSES.LARGE:"",v?`c-rating--${v}`:"",E].filter(Boolean).join(" ");if(b)return m.jsx("div",{className:$,ref:D(k,y),id:M,...g});const I=i!==null?i:j,T=()=>{const f=[],l=a?Math.floor(I*2)/2:Math.round(I),u=M||`rating-${Math.random().toString(36).substring(2,9)}`;for(let t=1;t<=o;t++){const x=t<=Math.floor(l),_=a&&t-.5===l,W=["c-rating__star",x?w.CLASSES.FULL:"",_?w.CLASSES.HALF:"",v?`c-rating__star--${v}`:"",N===t?"c-rating__star--focused":""].filter(Boolean).join(" "),z=`${u}-star-${t}`;f.push(m.jsx("div",{id:z,className:W,"data-value":t,role:e?"presentation":"button",tabIndex:e?-1:0,"aria-label":`${t} ${t===1?"star":"stars"}`,"aria-checked":t<=l,"aria-setsize":o,"aria-posinset":t,onClick:R=>B(R,t),onMouseEnter:R=>C(R,t),onMouseMove:R=>F(R,t),onFocus:()=>d(t),onBlur:()=>d(null),onKeyDown:R=>V(R,t),children:m.jsxs("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",children:[m.jsx("path",{className:"c-rating__star-outline",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",strokeWidth:"1"}),m.jsx("path",{className:"c-rating__star-full",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),m.jsx("path",{className:"c-rating__star-half",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",clipPath:`url(#half-star-clip-${u}-${t})`}),m.jsx("defs",{children:m.jsx("clipPath",{id:`half-star-clip-${u}-${t}`,children:m.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})})})]})},t))}return f};return m.jsx("div",{className:$,ref:D(k,y),id:M,"data-readonly":e?"true":"false",onMouseLeave:X,role:e?"img":"radiogroup","aria-label":L||`Rating: ${j} out of ${o} stars`,...g,children:T()})});q.displayName="Rating";try{q.displayName="Rating",q.__docgenInfo={description:"Rating component for displaying and collecting star ratings",displayName:"Rating",props:{value:{defaultValue:{value:"0"},description:"The rating value (0-5)",name:"value",required:!1,type:{name:"number"}},defaultValue:{defaultValue:null,description:"Default value for uncontrolled mode",name:"defaultValue",required:!1,type:{name:"number"}},maxValue:{defaultValue:{value:"5"},description:"Maximum possible rating value",name:"maxValue",required:!1,type:{name:"number"}},allowHalf:{defaultValue:{value:"false"},description:"Whether to allow half-star ratings",name:"allowHalf",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"Whether the rating is read-only",name:"readOnly",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"md"},description:"Size variant",name:"size",required:!1,type:{name:"enum",value:[{value:'"md"'},{value:'"sm"'},{value:'"lg"'}]}},color:{defaultValue:null,description:"Color theme",name:"color",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'},{value:'"tertiary"'},{value:'"invert"'},{value:'"brand"'},{value:'"error"'},{value:'"success"'},{value:'"warning"'},{value:'"info"'},{value:'"light"'},{value:'"dark"'}]}},onChange:{defaultValue:null,description:"Optional callback when rating changes",name:"onChange",required:!1,type:{name:"((value: number) => void)"}},label:{defaultValue:null,description:"Optional label for the rating component (for accessibility)",name:"label",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"ID for the rating component (for accessibility)",name:"id",required:!1,type:{name:"string"}},useVanillaJS:{defaultValue:{value:"false"},description:"Whether to use the vanilla JS implementation",name:"useVanillaJS",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"Additional CSS class names",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Component disabled state",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}try{RatingProps.displayName="RatingProps",RatingProps.__docgenInfo={description:"Rating component properties",displayName:"RatingProps",props:{}}}catch{}export{q as R};
