import{j as e}from"./jsx-runtime-BjG_zV1W.js";import{r as i}from"./index-BVDOR7y2.js";import{i as a}from"./components-BrxBU25R.js";import{S as A}from"./Spinner-puYPCf0E.js";import{I as T}from"./Icon-k4CeN--q.js";import{P as E}from"./Pagination-kuaiAkCB.js";function L({data:d=[],columns:f=[],sortable:y=!1,paginated:c=!1,pageSize:u=10,onSort:g,initialSortConfig:D}){const[r,_]=i.useState(D||null),[h,m]=i.useState(1),[C,x]=i.useState(""),S=i.useCallback(t=>{if(!y)return;let p="asc";r&&r.key===t&&r.direction==="asc"&&(p="desc");const n={key:t,direction:p};_(n),g&&g(n)},[y,r,g]),k=i.useCallback(t=>{t<1||t>Math.ceil(d.length/u)||m(t)},[d.length,u]),V=i.useCallback(t=>{x(t),m(1)},[]),j=i.useMemo(()=>{if(!C)return d;const t=C.toLowerCase();return d.filter(p=>f.some(n=>{const o=p[n.key];return o==null?!1:String(o).toLowerCase().includes(t)}))},[d,f,C]),l=i.useMemo(()=>!r||!y?j:[...j].sort((t,p)=>{const n=t[r.key],o=p[r.key];return n==null?r.direction==="asc"?-1:1:o==null?r.direction==="asc"?1:-1:typeof n=="string"&&typeof o=="string"?r.direction==="asc"?n.localeCompare(o):o.localeCompare(n):r.direction==="asc"?n>o?1:-1:n>o?-1:1}),[j,r,y]),P=i.useMemo(()=>{if(!c)return l;const t=(h-1)*u;return l.slice(t,t+u)},[l,c,h,u]),b=i.useMemo(()=>c?Math.max(1,Math.ceil(l.length/u)):1,[l.length,c,u]);return i.useEffect(()=>{m(1)},[d]),i.useEffect(()=>{h>b&&m(Math.max(1,b))},[h,b]),{displayData:P,sortConfig:r,currentPage:h,totalPages:b,handleSort:S,handlePageChange:k,handleSearch:V}}const q=({data:d,columns:f,className:y,sortable:c=!1,filterable:u=!1,paginated:g=!1,pageSize:D=10,striped:r=!1,bordered:_=!1,dense:h=!1,loading:m=!1,emptyMessage:C="No data available",onRowClick:x,onSort:S,...k})=>{const V=i.useRef(null),{displayData:j,sortConfig:l,currentPage:P,totalPages:b,handleSort:t,handlePageChange:p,handleSearch:n}=L({data:d,columns:f,sortable:c,paginated:g,pageSize:D,onSort:S}),o=[a.base,r&&a.striped,_&&a.bordered,h&&a.dense,m&&a.loading,y].filter(Boolean).join(" "),w=()=>e.jsx("thead",{className:a.header,children:e.jsx("tr",{children:f.map((s,v)=>e.jsx("th",{className:`${a.headerCell} ${s.sortable!==!1&&c?a.sortable:""}`,onClick:()=>s.sortable!==!1&&c?t(s.key):null,"aria-sort":(l==null?void 0:l.key)===s.key?l.direction==="asc"?"ascending":"descending":void 0,children:e.jsxs("div",{className:a.headerContent,children:[e.jsx("span",{children:s.title}),s.sortable!==!1&&c&&e.jsx("span",{className:a.sortIcon,children:(l==null?void 0:l.key)===s.key?l.direction==="asc"?e.jsx(T,{name:"CaretUp",size:"sm"}):e.jsx(T,{name:"CaretDown",size:"sm"}):null})]})},`header-${v}`))})}),M=()=>m?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:f.length,className:a.loadingCell,children:e.jsx("div",{className:a.loadingIndicator,children:e.jsx(A,{size:"md",variant:"primary"})})})})}):j.length===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:f.length,className:a.emptyCell,children:C})})}):e.jsx("tbody",{children:j.map((s,v)=>e.jsx("tr",{className:a.row,onClick:x?()=>x(s):void 0,tabIndex:x?0:void 0,role:x?"button":void 0,children:f.map((N,$)=>e.jsx("td",{className:a.cell,children:N.render?N.render(s[N.key],s):s[N.key]},`cell-${v}-${$}`))},`row-${v}`))}),I=()=>!g||b<=1?null:e.jsx("div",{className:a.pagination,children:e.jsx(E,{currentPage:P,totalPages:b,onPageChange:p,showFirstLastButtons:!0,showPrevNextButtons:!0,size:"sm",ariaLabel:"Data table pagination",className:"c-data-table__pagination"})}),W=()=>u?e.jsx("div",{className:a.toolbar,children:e.jsx("div",{className:a.search,children:e.jsx("input",{type:"text",placeholder:"Search...",className:`${a.searchInput} c-input`,onChange:s=>n(s.target.value),"aria-label":"Search table"})})}):null;return e.jsxs("div",{className:a.container,...k,children:[W(),e.jsx("div",{className:a.tableWrapper,children:e.jsxs("table",{ref:V,className:o,children:[w(),M()]})}),I()]})};q.displayName="DataTable";try{q.displayName="DataTable",q.__docgenInfo={description:"DataTable - A flexible and accessible data table component",displayName:"DataTable",props:{data:{defaultValue:null,description:"Data array to display in the table",name:"data",required:!0,type:{name:"any[]"}},columns:{defaultValue:null,description:"Column definitions",name:"columns",required:!0,type:{name:"DataTableColumn[]"}},sortable:{defaultValue:{value:"false"},description:"Whether the table is sortable",name:"sortable",required:!1,type:{name:"boolean"}},filterable:{defaultValue:{value:"false"},description:"Whether the table is filterable",name:"filterable",required:!1,type:{name:"boolean"}},paginated:{defaultValue:{value:"false"},description:"Whether the table is paginated",name:"paginated",required:!1,type:{name:"boolean"}},pageSize:{defaultValue:{value:"10"},description:"Number of rows per page",name:"pageSize",required:!1,type:{name:"number"}},striped:{defaultValue:{value:"false"},description:"Whether to show alternating row colors",name:"striped",required:!1,type:{name:"boolean"}},bordered:{defaultValue:{value:"false"},description:"Whether to show borders around cells",name:"bordered",required:!1,type:{name:"boolean"}},dense:{defaultValue:{value:"false"},description:"Whether to use compact styling",name:"dense",required:!1,type:{name:"boolean"}},loading:{defaultValue:{value:"false"},description:"Whether the table is in loading state",name:"loading",required:!1,type:{name:"boolean"}},emptyMessage:{defaultValue:{value:"No data available"},description:"Message to display when there is no data",name:"emptyMessage",required:!1,type:{name:"string"}},onRowClick:{defaultValue:null,description:"Callback when a row is clicked",name:"onRowClick",required:!1,type:{name:"((row: any) => void)"}},onSort:{defaultValue:null,description:"Callback when sorting changes",name:"onSort",required:!1,type:{name:"((sortConfig: SortConfig) => void)"}},className:{defaultValue:null,description:"Additional CSS class names",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Component disabled state",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}try{DataTableProps.displayName="DataTableProps",DataTableProps.__docgenInfo={description:"DataTable component properties",displayName:"DataTableProps",props:{}}}catch{}export{q as D};
