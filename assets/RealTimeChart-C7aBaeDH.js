import{j as o}from"./jsx-runtime-BjG_zV1W.js";import{r as e}from"./index-BVDOR7y2.js";import{x as V}from"./components-BrxBU25R.js";import{I as fe}from"./Icon-k4CeN--q.js";function he(w){const[t,a]=e.useState({hoveredPoint:null,selectedPoints:[],zoomLevel:1,panOffset:{x:0,y:0},isAnimating:!1,isDragging:!1,dragStart:null,crosshair:null,brushSelection:null,focusedPointIndex:0,touchState:{touches:[],lastDistance:0,isPinching:!1,isTouch:!1,lastTouchTime:0},penState:{isPen:!1,pressure:0,tiltX:0,tiltY:0}}),f={type:"line",size:"md",variant:"primary",loading:!1,interactive:!0,...w},k=e.useRef(null),P=e.useRef(null),Y=e.useRef(null),S=e.useCallback(u=>{const{type:c=f.type,size:r=f.size,variant:C=f.variant,loading:d=f.loading,error:E,className:D=""}=u,h=c?`${V.TYPE_PREFIX}${c}`:"",_=r==="md"?"":`${V.SIZE_PREFIX}${r}`,$=C?`${V.VARIANT_PREFIX}${C}`:"",z=d?V.LOADING_STATE_CLASS:"",X=E?V.ERROR_STATE_CLASS:"";return`${V.BASE_CLASS} ${h} ${$} ${_} ${z} ${X} ${D}`.trim()},[f]),N=e.useCallback(u=>{const{loading:c,error:r,type:C}=u,d={role:"img","aria-live":"polite"};return c&&(d["aria-busy"]="true"),r&&(d["aria-invalid"]="true"),C&&(d["data-chart-type"]=C),d},[]),I=e.useCallback((u,c=V.DEFAULT_WIDTH,r=V.DEFAULT_HEIGHT,C={top:20,right:30,bottom:40,left:50},d)=>{var O,H;if(!u.length)return null;const E=c-C.left-C.right,D=r-C.top-C.bottom,h=u.flatMap(q=>{var Z;return((Z=q.data)==null?void 0:Z.map(J=>typeof J.value=="number"?J.value:0))||[]});if(h.length===0)return null;const _=((O=d==null?void 0:d.yAxis)==null?void 0:O.min)??Math.min(0,...h),$=((H=d==null?void 0:d.yAxis)==null?void 0:H.max)??Math.max(...h,1),z=$-_;return{xScale:(q,Z)=>{var U,K;const J=Z||((K=(U=u[0])==null?void 0:U.data)==null?void 0:K.length)||1;return J<=1?C.left+E/2:(C.left+q/(J-1)*E)*t.zoomLevel+t.panOffset.x},yScale:q=>z===0?C.top+D/2:(C.top+D-(q-_)/z*D)*t.zoomLevel+t.panOffset.y,minValue:_,maxValue:$,valueRange:z,innerWidth:E,innerHeight:D,width:c,height:r,padding:C}},[t.zoomLevel,t.panOffset]),L=e.useCallback(u=>{const c=["var(--atomix-primary)","var(--atomix-secondary)","var(--atomix-success)","var(--atomix-info)","var(--atomix-warning)","var(--atomix-error)","var(--atomix-primary-5)","var(--atomix-primary-7)","var(--atomix-primary-3)","var(--atomix-gray-6)","var(--atomix-gray-8)","var(--atomix-gray-4)"];return Array.from({length:u},(r,C)=>c[C%c.length])},[]),M=e.useCallback((u,c,r,C,d,E)=>{a(D=>({...D,hoveredPoint:{datasetIndex:u,pointIndex:c,x:r,y:C,clientX:d,clientY:E},focusedPointIndex:c}))},[]),b=e.useCallback(()=>{a(u=>({...u,hoveredPoint:null}))},[]),p=e.useCallback((u,c,r=!1)=>{a(C=>{const d={datasetIndex:u,pointIndex:c},E=C.selectedPoints.findIndex(h=>h.datasetIndex===u&&h.pointIndex===c);let D;return E>=0?D=C.selectedPoints.filter((h,_)=>_!==E):D=r?[...C.selectedPoints,d]:[d],{...C,selectedPoints:D}})},[]),s=e.useCallback((u,c,r)=>{a(C=>{const d=1-u*.001,E=Math.max(.1,Math.min(10,C.zoomLevel*d)),D=E/C.zoomLevel,h={x:c-(c-C.panOffset.x)*D,y:r?r-(r-C.panOffset.y)*D:C.panOffset.y};return{...C,zoomLevel:E,panOffset:h}})},[]),n=e.useCallback((u,c)=>{a(r=>({...r,panOffset:{x:r.panOffset.x+u,y:r.panOffset.y+c}}))},[]),x=e.useCallback((u,c)=>{a(r=>({...r,isDragging:!0,dragStart:{x:u,y:c}}))},[]),m=e.useCallback(()=>{a(u=>({...u,isDragging:!1,dragStart:null}))},[]),l=e.useCallback((u,c)=>{a(r=>({...r,crosshair:{x:u,y:c}}))},[]),y=e.useCallback(()=>{a(u=>({...u,crosshair:null}))},[]),i=e.useCallback(u=>{const c=Array.from(u.touches).map(r=>({id:r.identifier,x:r.clientX,y:r.clientY}));a(r=>{const C={...r,touchState:{...r.touchState,touches:c,isTouch:!0,lastTouchTime:Date.now()}};if(c.length===1&&c[0]){const d=u.target.getBoundingClientRect(),E=c[0].x-d.left,D=c[0].y-d.top;return{...C,isDragging:!0,dragStart:{x:E,y:D}}}if(c.length===2&&c[0]&&c[1]){const d=Math.sqrt(Math.pow(c[1].x-c[0].x,2)+Math.pow(c[1].y-c[0].y,2));return{...C,touchState:{...C.touchState,lastDistance:d,isPinching:!0},isDragging:!1}}return C})},[]),v=e.useCallback(u=>{u.preventDefault();const c=Array.from(u.touches).map(r=>({id:r.identifier,x:r.clientX,y:r.clientY}));a(r=>{const C=u.target.getBoundingClientRect();if(c.length===1&&c[0]&&r.isDragging&&r.dragStart){const d=c[0].x-C.left,E=c[0].y-C.top,D=d-r.dragStart.x,h=E-r.dragStart.y;return{...r,panOffset:{x:r.panOffset.x+D,y:r.panOffset.y+h},dragStart:{x:d,y:E},touchState:{...r.touchState,touches:c}}}if(c.length===2&&c[0]&&c[1]&&r.touchState.isPinching){const d=Math.sqrt(Math.pow(c[1].x-c[0].x,2)+Math.pow(c[1].y-c[0].y,2));if(r.touchState.lastDistance>0){const E=d/r.touchState.lastDistance,D=Math.max(.1,Math.min(10,r.zoomLevel*E)),h=(c[0].x+c[1].x)/2-C.left,_=(c[0].y+c[1].y)/2-C.top,$=D/r.zoomLevel,z={x:h-(h-r.panOffset.x)*$,y:_-(_-r.panOffset.y)*$};return{...r,zoomLevel:D,panOffset:z,touchState:{...r.touchState,touches:c,lastDistance:d}}}return{...r,touchState:{...r.touchState,touches:c,lastDistance:d}}}return{...r,touchState:{...r.touchState,touches:c}}})},[]),g=e.useCallback(u=>{const c=Array.from(u.touches).map(r=>({id:r.identifier,x:r.clientX,y:r.clientY}));a(r=>{if(c.length===0)return{...r,isDragging:!1,dragStart:null,touchState:{...r.touchState,touches:[],isPinching:!1,lastDistance:0,isTouch:!1}};if(c.length===1&&c[0]&&r.touchState.isPinching){const C=u.target.getBoundingClientRect(),d=c[0].x-C.left,E=c[0].y-C.top;return{...r,isDragging:!0,dragStart:{x:d,y:E},touchState:{...r.touchState,touches:c,isPinching:!1,lastDistance:0}}}return{...r,touchState:{...r.touchState,touches:c}}})},[]),j=e.useCallback(u=>{const c=u.pointerType==="pen",r=u.pointerType==="touch";if(c)a(C=>({...C,penState:{isPen:!0,pressure:u.pressure||0,tiltX:u.tiltX||0,tiltY:u.tiltY||0},isDragging:!0,dragStart:{x:u.clientX-u.target.getBoundingClientRect().left,y:u.clientY-u.target.getBoundingClientRect().top}}));else if(!r){const C=u.target.getBoundingClientRect(),d=u.clientX-C.left,E=u.clientY-C.top;x(d,E)}},[x]),F=e.useCallback(u=>{const c=u.target.getBoundingClientRect(),r=u.clientX-c.left,C=u.clientY-c.top;if(u.pointerType==="pen"&&t.penState.isPen)a(d=>{if(d.isDragging&&d.dragStart){const E=r-d.dragStart.x,D=C-d.dragStart.y,h=Math.max(.1,u.pressure||.5);return{...d,panOffset:{x:d.panOffset.x+E*h,y:d.panOffset.y+D*h},dragStart:{x:r,y:C},penState:{...d.penState,pressure:u.pressure||0,tiltX:u.tiltX||0,tiltY:u.tiltY||0}}}return{...d,penState:{...d.penState,pressure:u.pressure||0,tiltX:u.tiltX||0,tiltY:u.tiltY||0}}});else if(u.pointerType!=="touch"&&(l(r,C),t.isDragging&&t.dragStart)){const d=r-t.dragStart.x,E=C-t.dragStart.y;n(d,E)}},[t,l,n]),T=e.useCallback(u=>{u.pointerType==="pen"?a(c=>({...c,isDragging:!1,dragStart:null,penState:{isPen:!1,pressure:0,tiltX:0,tiltY:0}})):u.pointerType!=="touch"&&m()},[m]),B=e.useCallback(()=>{a(u=>({...u,zoomLevel:1,panOffset:{x:0,y:0},selectedPoints:[],crosshair:null,brushSelection:null}))},[]),A=e.useCallback((u=1e3)=>{a(C=>({...C,isAnimating:!0})),k.current&&cancelAnimationFrame(k.current);const c=Date.now(),r=()=>{const C=Date.now()-c;Math.min(C/u,1)<1?k.current=requestAnimationFrame(r):a(E=>({...E,isAnimating:!1}))};k.current=requestAnimationFrame(r)},[]),G=e.useCallback(()=>{k.current&&(cancelAnimationFrame(k.current),k.current=null),a(u=>({...u,isAnimating:!1}))},[]);return e.useEffect(()=>()=>{k.current&&cancelAnimationFrame(k.current)},[]),{interactionState:t,hoveredPoint:t.hoveredPoint,selectedPoints:t.selectedPoints,zoomLevel:t.zoomLevel,panOffset:t.panOffset,isAnimating:t.isAnimating,isDragging:t.isDragging,crosshair:t.crosshair,brushSelection:t.brushSelection,focusedPointIndex:t.focusedPointIndex,containerRef:P,svgRef:Y,defaultProps:f,generateChartClass:S,chartAttributes:N(w||{}),calculateScales:I,getChartColors:L,handlePointHover:M,handlePointLeave:b,handlePointClick:p,handleZoom:s,handlePan:n,handleDragStart:x,handleDragEnd:m,handleCrosshair:l,clearCrosshair:y,resetView:B,handleTouchStart:i,handleTouchMove:v,handleTouchEnd:g,handlePointerDown:j,handlePointerMove:F,handlePointerUp:T,startAnimation:A,stopAnimation:G,setInteractionState:a}}function xe(w,t){const[a,f]=e.useState(w),[k,P]=e.useState(!1),{enableDecimation:Y=!1,maxDataPoints:S=1e3,enableRealTime:N=!1,realTimeInterval:I=1e3}=t||{},L=e.useCallback((p,s)=>{var m,l;if(!Y||!p.length)return p;const n=((l=(m=p[0])==null?void 0:m.data)==null?void 0:l.length)||0;if(n<=s)return p;const x=Math.ceil(n/s);return p.map(y=>{var i;return{...y,data:((i=y.data)==null?void 0:i.filter((v,g)=>g%x===0))||[]}})},[Y]),M=e.useCallback((p,s)=>{const n=[];for(let x=0;x<p.length;x++)if(x<s-1)n.push(null);else{const m=p.slice(x-s+1,x+1).reduce((l,y)=>l+y,0);n.push(m/s)}return n},[]),b=e.useCallback(p=>{const s=p.length;if(s<2)return p.map(()=>null);const n=p.reduce((v,g,j)=>v+j,0),x=p.reduce((v,g)=>v+g,0),m=p.reduce((v,g,j)=>v+j*g,0),l=p.reduce((v,g,j)=>v+j*j,0),y=(s*m-n*x)/(s*l-n*n),i=(x-y*n)/s;return p.map((v,g)=>y*g+i)},[]);return e.useEffect(()=>{P(!0),(async()=>{let s=[...w];Y&&S&&(s=L(s,S)),f(s),P(!1)})()},[w,L,Y,S]),e.useEffect(()=>{if(!N)return;const p=setInterval(()=>{f(s=>[...s])},I);return()=>clearInterval(p)},[N,I]),{processedData:a,isProcessing:k,decimateData:L,calculateMovingAverage:M,calculateTrendLine:b,setProcessedData:f}}function pe(w,t){const{enableKeyboardNavigation:a=!0,enableScreenReader:f=!0,announceDataChanges:k=!0}=t||{},[P,Y]=e.useState({datasetIndex:0,pointIndex:0}),[S,N]=e.useState(""),I=e.useCallback((b,p)=>{var x,m;if(!a||!w.length)return;const s=w.length-1,n=(((m=(x=w[P.datasetIndex])==null?void 0:x.data)==null?void 0:m.length)||1)-1;switch(b.key){case"ArrowLeft":b.preventDefault(),Y(l=>({...l,pointIndex:Math.max(0,l.pointIndex-1)}));break;case"ArrowRight":b.preventDefault(),Y(l=>({...l,pointIndex:Math.min(n,l.pointIndex+1)}));break;case"ArrowUp":b.preventDefault(),Y(l=>({...l,datasetIndex:Math.max(0,l.datasetIndex-1)}));break;case"ArrowDown":b.preventDefault(),Y(l=>({...l,datasetIndex:Math.min(s,l.datasetIndex+1)}));break;case"Home":b.preventDefault(),Y(l=>({...l,pointIndex:0}));break;case"End":b.preventDefault(),Y(l=>({...l,pointIndex:n}));break;case"Enter":case" ":b.preventDefault(),p==null||p(P.datasetIndex,P.pointIndex);break}},[a,w,P]),L=e.useCallback(b=>{f&&(N(b),setTimeout(()=>N(""),1e3))},[f]);e.useEffect(()=>{if(!k||!w.length)return;const b=w.reduce((p,s)=>{var n;return p+(((n=s.data)==null?void 0:n.length)||0)},0);L(`Chart updated with ${w.length} datasets and ${b} data points`)},[w,k,L]);const M=e.useCallback(()=>{if(!w.length)return"Empty chart";const b=w.map((p,s)=>{var y,i;const n=((y=p.data)==null?void 0:y.length)||0,x=((i=p.data)==null?void 0:i.map(v=>v.value).filter(v=>typeof v=="number"))||[],m=Math.min(...x),l=Math.max(...x);return`Dataset ${s+1}: ${p.label}, ${n} points, range ${m} to ${l}`}).join(". ");return`Chart with ${w.length} datasets. ${b}`},[w]);return{focusedPoint:P,announcement:S,handleKeyDown:I,announceData:L,getAccessibleDescription:M,setFocusedPoint:Y}}function be(w,t){const{enableVirtualization:a=!1,enableMemoization:f=!0,debounceMs:k=100}=t||{},[P,Y]=e.useState(!1),S=e.useRef(null),N=e.useMemo(()=>f?w.map(M=>{var b,p,s;return{label:M.label,dataLength:((b=M.data)==null?void 0:b.length)||0,minValue:Math.min(...((p=M.data)==null?void 0:p.map(n=>n.value).filter(n=>typeof n=="number"))||[0]),maxValue:Math.max(...((s=M.data)==null?void 0:s.map(n=>n.value).filter(n=>typeof n=="number"))||[0])}}):null,[w,f]),I=e.useCallback(M=>{S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{M(),Y(!1)},k),Y(!0)},[k]),L=e.useCallback((M,b,p)=>{var m,l,y,i;if(!a)return{start:0,end:((l=(m=w[0])==null?void 0:m.data)==null?void 0:l.length)||0};const s=Math.floor(M/b),n=Math.ceil(p/b),x=Math.min(s+n+1,((i=(y=w[0])==null?void 0:y.data)==null?void 0:i.length)||0);return{start:Math.max(0,s-1),end:x}},[a,w]);return e.useEffect(()=>()=>{S.current&&clearTimeout(S.current)},[]),{isOptimizing:P,memoizedScales:N,debouncedUpdate:I,getVisibleRange:L}}function Ce(w,t={},a={}){const[f,k]=e.useState({isFullscreen:!1,isExporting:!1,isRefreshing:!1,zoomLevel:1,panEnabled:!1,showGrid:!0,showLegend:!0,showTooltips:!0,animationsEnabled:!0}),{enableDefaults:P=!0,defaults:Y={},exportFormats:S=["png","svg","csv"],customActions:N=[],customGroups:I=[]}=t,M={...e.useCallback(()=>{const s={refresh:!0,export:!0,fullscreen:!0,settings:!0,grid:!0,legend:!0,tooltips:!0,animations:!0,zoom:!1,pan:!1,reset:!1};switch(w){case"interactive":case"advanced":return{...s,zoom:!0,pan:!0,reset:!0};case"line":case"area":case"bar":case"scatter":return{...s,zoom:!0,reset:!0};case"realtime":return{...s,refresh:!0,export:!1,animations:!1};case"pie":case"donut":case"gauge":return{...s,zoom:!1,pan:!1,grid:!1};case"heatmap":case"treemap":return{...s,zoom:!0,pan:!0,grid:!1};case"candlestick":return{...s,zoom:!0,pan:!0,reset:!0,grid:!0};default:return s}},[w])(),...Y},b={onRefresh:e.useCallback(()=>{var s;k(n=>({...n,isRefreshing:!0})),(s=a.onRefresh)==null||s.call(a),setTimeout(()=>{k(n=>({...n,isRefreshing:!1}))},1e3)},[a.onRefresh]),onExport:e.useCallback(async s=>{var n;k(x=>({...x,isExporting:!0}));try{await((n=a.onExport)==null?void 0:n.call(a,s))}finally{k(x=>({...x,isExporting:!1}))}},[a.onExport]),onFullscreen:e.useCallback(s=>{var n;k(x=>({...x,isFullscreen:s})),(n=a.onFullscreen)==null||n.call(a,s)},[a.onFullscreen]),onZoomIn:e.useCallback(()=>{var s;k(n=>({...n,zoomLevel:Math.min(n.zoomLevel*1.2,5)})),(s=a.onZoomIn)==null||s.call(a)},[a.onZoomIn]),onZoomOut:e.useCallback(()=>{var s;k(n=>({...n,zoomLevel:Math.max(n.zoomLevel/1.2,.2)})),(s=a.onZoomOut)==null||s.call(a)},[a.onZoomOut]),onZoomReset:e.useCallback(()=>{var s;k(n=>({...n,zoomLevel:1})),(s=a.onZoomReset)==null||s.call(a)},[a.onZoomReset]),onPanToggle:e.useCallback(s=>{var n;k(x=>({...x,panEnabled:s})),(n=a.onPanToggle)==null||n.call(a,s)},[a.onPanToggle]),onReset:e.useCallback(()=>{var s;k(n=>({...n,zoomLevel:1,panEnabled:!1})),(s=a.onReset)==null||s.call(a)},[a.onReset]),onGridToggle:e.useCallback(s=>{var n;k(x=>({...x,showGrid:s})),(n=a.onGridToggle)==null||n.call(a,s)},[a.onGridToggle]),onLegendToggle:e.useCallback(s=>{var n;k(x=>({...x,showLegend:s})),(n=a.onLegendToggle)==null||n.call(a,s)},[a.onLegendToggle]),onTooltipsToggle:e.useCallback(s=>{var n;k(x=>({...x,showTooltips:s})),(n=a.onTooltipsToggle)==null||n.call(a,s)},[a.onTooltipsToggle]),onAnimationsToggle:e.useCallback(s=>{var n;k(x=>({...x,animationsEnabled:s})),(n=a.onAnimationsToggle)==null||n.call(a,s)},[a.onAnimationsToggle]),onSettings:e.useCallback(()=>{},[])},p=e.useCallback(()=>{const s=[],n=[];M.refresh&&n.push({id:"refresh",label:"Refresh",icon:"ArrowClockwise",onClick:b.onRefresh,disabled:f.isRefreshing,tooltip:"Refresh chart data"}),M.export&&n.push({id:"export",label:"Export",icon:"Download",onClick:()=>b.onExport("png"),disabled:f.isExporting,variant:"primary",tooltip:"Export chart"}),n.length>0&&s.push({id:"data-actions",label:"Data",actions:n,separator:!0});const x=[];M.zoom&&x.push({id:"zoom-in",label:"Zoom In",icon:"MagnifyingGlassPlus",onClick:b.onZoomIn,tooltip:"Zoom in"},{id:"zoom-out",label:"Zoom Out",icon:"MagnifyingGlassMinus",onClick:b.onZoomOut,tooltip:"Zoom out"}),M.pan&&x.push({id:"pan",label:"Pan",icon:"ArrowsOutCardinal",onClick:()=>b.onPanToggle(!f.panEnabled),active:f.panEnabled,tooltip:"Toggle pan mode"}),M.reset&&x.push({id:"reset",label:"Reset",icon:"ArrowCounterClockwise",onClick:b.onReset,tooltip:"Reset view"}),M.fullscreen&&x.push({id:"fullscreen",label:f.isFullscreen?"Exit Fullscreen":"Fullscreen",icon:f.isFullscreen?"ArrowsIn":"ArrowsOut",onClick:()=>b.onFullscreen(!f.isFullscreen),variant:"success",tooltip:`${f.isFullscreen?"Exit":"Enter"} fullscreen`}),x.length>0&&s.push({id:"view-actions",label:"View",actions:x,separator:!0});const m=[];if(M.grid&&m.push({id:"grid",label:"Grid",icon:"GridFour",onClick:()=>b.onGridToggle(!f.showGrid),active:f.showGrid,tooltip:"Toggle grid"}),M.legend&&m.push({id:"legend",label:"Legend",icon:"List",onClick:()=>b.onLegendToggle(!f.showLegend),active:f.showLegend,tooltip:"Toggle legend"}),M.tooltips&&m.push({id:"tooltips",label:"Tooltips",icon:"ChatCircle",onClick:()=>b.onTooltipsToggle(!f.showTooltips),active:f.showTooltips,tooltip:"Toggle tooltips"}),M.animations&&m.push({id:"animations",label:"Animations",icon:"Play",onClick:()=>b.onAnimationsToggle(!f.animationsEnabled),active:f.animationsEnabled,tooltip:"Toggle animations"}),m.length>0&&s.push({id:"display-actions",label:"Display",actions:m,separator:!0}),M.settings&&s.push({id:"settings-actions",label:"Settings",actions:[{id:"settings",label:"Settings",icon:"Gear",onClick:b.onSettings,tooltip:"Chart settings"}]}),s.push(...I),N.length>0)if(s.length>0){if(s.length>0){const l=s[s.length-1];l&&l.actions.push(...N)}}else s.push({id:"custom-actions",label:"Custom",actions:N});return s},[w,M,f,b,N,I]);return e.useEffect(()=>{const s=n=>{if(n.ctrlKey||n.metaKey)switch(n.key.toLowerCase()){case"r":M.refresh&&(n.preventDefault(),b.onRefresh());break;case"e":M.export&&(n.preventDefault(),b.onExport("png"));break;case"f":M.fullscreen&&(n.preventDefault(),b.onFullscreen(!f.isFullscreen));break}else switch(n.key){case"+":case"=":M.zoom&&(n.preventDefault(),b.onZoomIn());break;case"-":M.zoom&&(n.preventDefault(),b.onZoomOut());break;case"r":M.reset&&(n.preventDefault(),b.onReset());break;case" ":M.pan&&(n.preventDefault(),b.onPanToggle(!f.panEnabled));break;case"F11":M.fullscreen&&(n.preventDefault(),b.onFullscreen(!f.isFullscreen));break}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[M,f,b]),{state:f,setState:k,handlers:b,toolbarGroups:p(),config:{enableDefaults:P,defaults:M,exportFormats:S}}}const me=e.memo(e.forwardRef(({chartType:w="line",groups:t=[],enableDefaults:a=!0,defaults:f={refresh:!0,export:!0,fullscreen:!0,settings:!0,zoom:!0,pan:!0,reset:!0},exportFormats:k=["png","svg","csv"],size:P="md",position:Y="top",onRefresh:S,onExport:N,onFullscreen:I,onSettings:L,onZoomIn:M,onZoomOut:b,onZoomReset:p,onPanToggle:s,onReset:n,onGridToggle:x,onLegendToggle:m,onTooltipsToggle:l,onAnimationsToggle:y,state:i={},className:v="",...g},j)=>{const[F,T]=e.useState(!1),[B,A]=e.useState(!1),G=e.useCallback(()=>{const h=[];return f.refresh&&S&&h.push({id:"refresh",label:"Refresh",icon:"ArrowClockwise",onClick:S,disabled:i.isRefreshing,tooltip:"Refresh chart data (Ctrl+R)",shortcut:"Ctrl+R"}),f.export&&N&&h.push({id:"export",label:"Export",icon:"Download",onClick:()=>T(!F),disabled:i.isExporting,variant:"primary",tooltip:"Export chart (Ctrl+E)",shortcut:"Ctrl+E"}),[{id:"data-actions",label:"Data",actions:h,separator:!0}]},[f,S,N,i,F]),u=e.useCallback(()=>{const h=[];return f.zoom&&(w==="interactive"||w==="line"||w==="area"||w==="bar")&&h.push({id:"zoom-in",label:"Zoom In",icon:"MagnifyingGlassPlus",onClick:()=>M==null?void 0:M(),tooltip:"Zoom in (+)",shortcut:"+"},{id:"zoom-out",label:"Zoom Out",icon:"MagnifyingGlassMinus",onClick:()=>b==null?void 0:b(),tooltip:"Zoom out (-)",shortcut:"-"}),f.pan&&(w==="interactive"||w==="line"||w==="area")&&h.push({id:"pan",label:"Pan",icon:"ArrowsOutCardinal",onClick:()=>s==null?void 0:s(!i.panEnabled),active:i.panEnabled,tooltip:"Toggle pan mode (Space)",shortcut:"Space"}),f.reset&&(p||n)&&h.push({id:"reset",label:"Reset View",icon:"ArrowCounterClockwise",onClick:()=>{p==null||p(),n==null||n()},tooltip:"Reset view (R)",shortcut:"R"}),f.fullscreen&&I&&h.push({id:"fullscreen",label:i.isFullscreen?"Exit Fullscreen":"Fullscreen",icon:i.isFullscreen?"ArrowsIn":"ArrowsOut",onClick:()=>I==null?void 0:I(!i.isFullscreen),variant:"success",tooltip:`${i.isFullscreen?"Exit":"Enter"} fullscreen (F11)`,shortcut:"F11"}),h.length>0?[{id:"view-actions",label:"View",actions:h,separator:!0}]:[]},[f,w,M,b,s,p,n,I,i]),c=e.useCallback(()=>{const h=[];return f.settings&&L&&h.push({id:"settings",label:"Settings",icon:"Gear",onClick:()=>A(!B),tooltip:"Chart settings"}),h.length>0?[{id:"tool-actions",label:"Tools",actions:h}]:[]},[f,L,B]),r=t&&t.length>0?t:[...a?G():[],...a?u():[],...a?c():[]];console.log("ChartToolbar: All groups",r),console.log("ChartToolbar: Groups provided",t),console.log("ChartToolbar: Enable defaults",a);const C=h=>(console.log("ChartToolbar: Rendering action",h.id,h),o.jsxs("button",{className:`${V.ACTION_CLASS} ${h.variant?`${V.ACTION_CLASS}--${h.variant}`:""} ${h.active?"is-active":""} u-d-inline-flex u-align-items-center u-gap-1`,onClick:()=>{console.log("ChartToolbar: Action clicked",h.id),h.onClick()},disabled:h.disabled,title:h.tooltip,type:"button","aria-label":h.label,children:[o.jsx(fe,{name:h.icon,size:"sm"}),P==="lg"&&o.jsx("span",{className:"u-text-xs",children:h.label})]},h.id)),d=()=>!F||!N?null:o.jsxs("div",{className:`${V.EXPORT_DROPDOWN_CLASS} u-position-absolute u-bg-white u-border u-border-radius u-shadow u-p-2 u-z-10`,children:[o.jsx("div",{className:"u-mb-2 u-text-xs u-text-muted u-fw-medium",children:"Export Formats"}),k.map(h=>o.jsx("button",{className:`${V.EXPORT_OPTION_CLASS} u-d-block u-w-full u-text-start u-p-1 u-border-0 u-bg-transparent u-text-decoration-none u-border-radius-sm`,onClick:()=>{N(h),T(!1)},disabled:i.isExporting,type:"button",children:h.toUpperCase()},h))]}),E=()=>B?o.jsxs("div",{className:"u-position-absolute u-bg-white u-border u-border-radius u-shadow u-p-3 u-z-10",style:{minWidth:"200px"},children:[o.jsx("div",{className:"u-mb-2 u-text-xs u-text-muted u-fw-medium",children:"Chart Settings"}),o.jsxs("div",{className:"u-d-flex u-flex-column u-gap-2",children:[i.zoomLevel&&o.jsxs("div",{className:"u-d-flex u-justify-between u-align-items-center",children:[o.jsx("span",{className:"u-text-sm",children:"Zoom Level"}),o.jsxs("span",{className:"u-text-sm u-text-muted",children:[Math.round((i.zoomLevel||1)*100),"%"]})]}),o.jsxs("div",{className:"u-d-flex u-justify-between u-align-items-center",children:[o.jsx("span",{className:"u-text-sm",children:"Chart Type"}),o.jsx("span",{className:"u-text-sm u-text-muted u-text-capitalize",children:w})]})]})]}):null,D=`${V.TOOLBAR_CLASS} ${V.TOOLBAR_CLASS}--${P} ${V.TOOLBAR_CLASS}--${Y} u-d-flex u-align-items-center u-gap-2 ${v}`.trim();return o.jsx("div",{ref:j,className:D,...g,children:r.map((h,_)=>o.jsxs("div",{className:"u-d-flex u-align-items-center u-gap-1",children:[h.separator&&_>0&&o.jsx("div",{className:"u-border-start u-h-4 u-mx-1 u-opacity-25"}),h.label&&P==="lg"&&o.jsx("span",{className:"u-text-xs u-text-muted u-me-1",children:h.label}),o.jsxs("div",{className:"u-d-flex u-align-items-center u-gap-1 u-position-relative",children:[h.actions.map(C),h.actions.some($=>$.id==="export")&&d(),h.actions.some($=>$.id==="settings")&&E()]})]},h.id))})}));me.displayName="ChartToolbar";const ne=e.memo(e.forwardRef(({children:w,type:t="line",size:a="md",variant:f="primary",title:k,subtitle:P,loading:Y=!1,error:S,className:N="","aria-label":I,onFullscreen:L,onExport:M,onRefresh:b,showToolbar:p=!1,enableFullscreen:s=!1,enableExport:n=!1,enableRefresh:x=!1,exportFormats:m=["png","svg","csv"],datasets:l,config:y,...i},v)=>{const[g,j]=e.useState(!1),[F,T]=e.useState(!1),{state:B,handlers:A,toolbarGroups:G}=Ce(t,{enableDefaults:p,defaults:{refresh:x,export:n,fullscreen:s,zoom:!0,pan:!0,reset:!0,grid:!0,legend:!0,tooltips:!0,animations:!0,settings:!0},exportFormats:m},{onRefresh:b,onExport:M,onFullscreen:E=>{j(E),L==null||L(E)}}),{generateChartClass:u,chartAttributes:c}=he({type:t,size:a,variant:f,loading:Y,error:S}),r=u({type:t,size:a,variant:f,loading:Y,error:S,className:N});e.useCallback(()=>{A.onFullscreen(!B.isFullscreen)},[A,B.isFullscreen]),e.useCallback(async E=>{await A.onExport(E)},[A]),e.useCallback(()=>{A.onRefresh()},[A]),e.useEffect(()=>{j(B.isFullscreen),T(B.isExporting)},[B.isFullscreen,B.isExporting]);const C=()=>p?o.jsx(me,{chartType:t,groups:G,enableDefaults:G.length===0,exportFormats:m,state:{isFullscreen:B.isFullscreen,isExporting:B.isExporting,isRefreshing:B.isRefreshing,zoomLevel:B.zoomLevel,panEnabled:B.panEnabled,showGrid:B.showGrid,showLegend:B.showLegend,showTooltips:B.showTooltips,animationsEnabled:B.animationsEnabled},onRefresh:A.onRefresh,onExport:A.onExport,onFullscreen:A.onFullscreen,onZoomIn:A.onZoomIn,onZoomOut:A.onZoomOut,onZoomReset:A.onZoomReset,onPanToggle:A.onPanToggle,onReset:A.onReset,onSettings:A.onSettings,onGridToggle:A.onGridToggle,onLegendToggle:A.onLegendToggle,onTooltipsToggle:A.onTooltipsToggle,onAnimationsToggle:A.onAnimationsToggle}):null,d=`${r}${g?` ${V.CLASSES.FULLSCREEN}`:""}`;return o.jsxs("div",{ref:v,className:d,"aria-label":I||`${t} chart`,role:"img",tabIndex:0,...c,...i,children:[(k||P||p)&&o.jsxs("div",{className:`${V.HEADER_CLASS} u-d-flex u-justify-between u-align-items-start u-gap-4`,children:[o.jsxs("div",{className:`${V.HEADER_CONTENT_CLASS} u-flex-1`,children:[k&&o.jsx("h3",{className:`${V.TITLE_CLASS} u-mb-1`,children:k}),P&&o.jsx("p",{className:`${V.SUBTITLE_CLASS} u-mb-0`,children:P})]}),C()]}),o.jsxs("div",{className:V.CONTENT_CLASS,children:[Y&&o.jsxs("div",{className:V.LOADING_CLASS,children:[o.jsx("div",{className:V.LOADING_SPINNER_CLASS}),o.jsx("span",{className:V.LOADING_TEXT_CLASS,children:B.isExporting?"Exporting chart...":B.isRefreshing?"Refreshing chart...":"Loading chart..."})]}),S&&o.jsxs("div",{className:V.ERROR_CLASS,children:[o.jsx("div",{className:V.ERROR_ICON_CLASS,children:"âš "}),o.jsxs("div",{className:V.ERROR_CONTENT_CLASS,children:[o.jsx("div",{className:V.ERROR_MESSAGE_CLASS,children:"Chart Error"}),o.jsx("div",{className:V.ERROR_DETAILS_CLASS,children:S})]})]}),!Y&&!S&&!w&&o.jsxs("div",{className:V.EMPTY_CLASS,children:[o.jsx("div",{className:V.EMPTY_ICON_CLASS,children:"ðŸ“Š"}),o.jsx("div",{className:V.EMPTY_MESSAGE_CLASS,children:"No data available"}),o.jsx("div",{className:V.EMPTY_DETAILS_CLASS,children:"Add data to your chart to see visualizations"})]}),!Y&&!S&&w&&o.jsx("div",{className:V.CANVAS_CLASS,children:w})]})]})}));ne.displayName="Chart";try{ne.displayName="Chart",ne.__docgenInfo={description:"Chart component properties",displayName:"Chart",props:{}}}catch{}function Se(w,t={}){const[a,f]=e.useState(1),[k,P]=e.useState({x:0,y:0}),[Y,S]=e.useState(null),N=e.useCallback((m,l)=>{const y=[];for(let i=l-1;i<m.length;i++){const g=m.slice(i-l+1,i+1).reduce((F,T)=>F+T.value,0)/l,j=m[i];j&&y.push({label:j.label,value:g,color:"rgba(255, 255, 255, 0.5)"})}return y},[]),I=e.useCallback(m=>{const l=m.length;if(l<2)return m.map(()=>null);const y=m.reduce((T,B,A)=>T+A,0),i=m.reduce((T,B)=>T+B.value,0),v=m.reduce((T,B,A)=>T+A*B.value,0),g=m.reduce((T,B,A)=>T+A*A,0),j=(l*v-y*i)/(l*g-y*y),F=(i-j*y)/l;return m.map((T,B)=>({label:T.label,value:j*B+F,color:"rgba(255, 255, 255, 0.3)"}))},[]),L=e.useCallback((m,l=.4)=>{if(m.length<2)return"";const y=m.map((g,j)=>{if(j===0||j===m.length-1)return{cp1x:g.x,cp1y:g.y,cp2x:g.x,cp2y:g.y};const F=m[j-1],T=m[j+1];if(!F||!T)return{cp1x:g.x,cp1y:g.y,cp2x:g.x,cp2y:g.y};const B=T.x-F.x,A=T.y-F.y;return{cp1x:g.x-B*l,cp1y:g.y-A*l,cp2x:g.x+B*l,cp2y:g.y+A*l}}),i=m[0];if(!i)return"";let v=`M ${i.x},${i.y}`;for(let g=1;g<m.length;g++){const j=y[g-1],F=y[g],T=m[g];!j||!F||!T||(v+=` C ${j.cp2x},${j.cp2y} ${F.cp1x},${F.cp1y} ${T.x},${T.y}`)}return v},[]),M=e.useCallback((m,l,y)=>{if(!t.enableZoom)return;const i=m>0?.9:1.1,v=Math.max(.1,Math.min(10,a*i));f(v);const g=v/a;P(j=>({x:l-(l-j.x)*g,y:y-(y-j.y)*g}))},[a,t.enableZoom]),b=e.useCallback((m,l)=>{t.enablePan&&P(y=>({x:y.x+m,y:y.y+l}))},[t.enablePan]),p=e.useCallback(()=>{f(1),P({x:0,y:0})},[]),s=e.useCallback((m,l,y,i)=>{S({datasetIndex:m,pointIndex:l,x:y,y:i})},[]),n=e.useCallback(()=>{S(null)},[]),x=e.useMemo(()=>w.map(m=>{const l={...m};return t.showMovingAverages&&t.movingAveragePeriods&&(l.movingAverages=t.movingAveragePeriods.map(y=>({period:y,data:N(m.data,y)}))),t.showTrendLines&&(l.trendLine=I(m.data)),l}),[w,t.showMovingAverages,t.movingAveragePeriods,t.showTrendLines,N,I]);return{zoomLevel:a,panOffset:k,hoveredPoint:Y,processedDatasets:x,handleZoom:M,handlePan:b,resetView:p,handlePointHover:s,handlePointLeave:n,calculateMovingAverage:N,calculateTrendLine:I,generateSmoothPath:L,setZoomLevel:f,setPanOffset:P,setHoveredPoint:S}}const re=e.memo(e.forwardRef(({datasets:w=[],config:t,width:a=V.DEFAULT_WIDTH,height:f=V.DEFAULT_HEIGHT,onDataPointClick:k,interactive:P=!0,enableRealTime:Y=!1,enableAccessibility:S=!0,enablePerformanceOptimization:N=!0,renderContent:I},L)=>{const{calculateScales:M,getChartColors:b,interactionState:p,handlePointHover:s,handlePointLeave:n,handlePointClick:x,handleZoom:m,handlePan:l,handleDragStart:y,handleDragEnd:i,handleCrosshair:v,clearCrosshair:g,handleTouchStart:j,handleTouchMove:F,handleTouchEnd:T,handlePointerDown:B,handlePointerMove:A,handlePointerUp:G,svgRef:u}=he({interactive:P}),{processedData:c}=xe(w,{enableRealTime:Y,enableDecimation:N,maxDataPoints:1e3}),{announcement:r,focusedPoint:C,getAccessibleDescription:d,handleKeyDown:E}=pe(c,{enableKeyboardNavigation:S,enableScreenReader:S});be(c,{enableMemoization:N,debounceMs:100});const D=e.useCallback(R=>{if(!P||p.touchState.isTouch)return;const O=R.currentTarget.getBoundingClientRect(),H=R.clientX-O.left,q=R.clientY-O.top;if(v(H,q),p.isDragging&&p.dragStart){const Z=H-p.dragStart.x,J=q-p.dragStart.y;l(Z,J)}},[P,p,v,l]),h=e.useCallback(R=>{if(!P||p.touchState.isTouch)return;const O=R.currentTarget.getBoundingClientRect(),H=R.clientX-O.left,q=R.clientY-O.top;y(H,q)},[P,p.touchState.isTouch,y]),_=e.useCallback(()=>{!P||p.touchState.isTouch||i()},[P,p.touchState.isTouch,i]),$=e.useCallback(R=>{if(!P)return;R.preventDefault();const O=R.currentTarget.getBoundingClientRect(),H=R.clientX-O.left,q=R.clientY-O.top,J=Math.abs(R.deltaY)<50?.01:.1,W=R.deltaY*J;m(W,H,q)},[P,m]),z=e.useCallback((R,O,H)=>{P&&(x(O,H),k==null||k(R,O,H))},[P,x,k]),X=e.useMemo(()=>{const R=M(c,a,f,void 0,t);if(!R)return null;const O=b(c.length).filter(H=>H!==void 0);return{scales:R,colors:O,datasets:c.map((H,q)=>({...H,color:H.color||O[q]}))}},[c,t,a,f,M,b]);return X?o.jsxs("svg",{ref:L||u,width:"100%",height:"100%",viewBox:`0 0 ${X.scales.width} ${X.scales.height}`,preserveAspectRatio:"xMidYMid meet",className:V.CHART_SVG_CLASS,onMouseMove:D,onMouseDown:h,onMouseUp:_,onMouseLeave:()=>{g(),_()},onWheel:$,onTouchStart:R=>j(R.nativeEvent),onTouchMove:R=>F(R.nativeEvent),onTouchEnd:R=>T(R.nativeEvent),onPointerDown:R=>B(R.nativeEvent),onPointerMove:R=>A(R.nativeEvent),onPointerUp:R=>G(R.nativeEvent),tabIndex:S?0:void 0,role:S?"img":void 0,"aria-label":S?d():void 0,onKeyDown:S?R=>E(R.nativeEvent,(O,H)=>{var Z;const q=(Z=c[O])==null?void 0:Z.data[H];z(q,O,H)}):void 0,style:{touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:[S&&r&&o.jsx("text",{x:"-9999",y:"-9999",className:"sr-only","aria-live":"polite",children:r}),I({...X,interactionState:p,handlers:{onDataPointClick:z,onPointHover:s,onPointLeave:n,onMouseMove:D,onMouseDown:h,onMouseUp:_,onWheel:$},accessibility:{announcement:r,focusedPoint:C,getAccessibleDescription:d}}),P&&p.crosshair&&o.jsxs("g",{className:"chart-crosshair",style:{pointerEvents:"none"},children:[o.jsx("line",{x1:p.crosshair.x,y1:0,x2:p.crosshair.x,y2:X.scales.height,stroke:"var(--atomix-gray-4)",strokeWidth:"1",strokeDasharray:"4,4",opacity:"0.6"}),o.jsx("line",{x1:0,y1:p.crosshair.y,x2:X.scales.width,y2:p.crosshair.y,stroke:"var(--atomix-gray-4)",strokeWidth:"1",strokeDasharray:"4,4",opacity:"0.6"})]}),P&&p.zoomLevel!==1&&o.jsxs("g",{className:"chart-zoom-indicator",children:[o.jsx("rect",{x:X.scales.width-80,y:10,width:"70",height:"20",fill:"rgba(0, 0, 0, 0.8)",rx:"4"}),o.jsxs("text",{x:X.scales.width-45,y:24,textAnchor:"middle",fill:"white",fontSize:"12",children:[Math.round(p.zoomLevel*100),"%"]})]})]}):null}));re.displayName="ChartRenderer";const oe=e.memo(({dataPoint:w,datasetLabel:t,datasetColor:a,position:f,visible:k,customRenderer:P})=>{const Y=e.useRef(null),[S,N]=e.useState(f);return e.useEffect(()=>{if(!k||!Y.current)return;const L=Y.current.getBoundingClientRect(),M={width:window.innerWidth,height:window.innerHeight};let b=f.x+8,p=f.y-L.height;b+L.width>M.width-16&&(b=f.x-L.width-8),p<8&&(p=f.y+8),b=Math.max(8,Math.min(b,M.width-L.width-8)),p=Math.max(8,Math.min(p,M.height-L.height-8)),N({x:b,y:p})},[f,k]),k?o.jsx("div",{ref:Y,className:"c-chart__tooltip",style:{left:S.x,top:S.y},children:P?P(w):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"c-chart__tooltip-title",children:w.label}),o.jsxs("div",{className:"c-chart__tooltip-content",children:[t&&o.jsxs("div",{className:"c-chart__tooltip-dataset",children:[o.jsx("div",{className:"c-chart__tooltip-color-indicator",style:{backgroundColor:a}}),o.jsxs("span",{className:"c-chart__tooltip-dataset-label",children:[t,":"]}),o.jsx("span",{className:"c-chart__tooltip-value",children:w.value})]}),w.metadata&&o.jsx("div",{className:"c-chart__tooltip-metadata",children:Object.entries(w.metadata).map(([I,L])=>o.jsxs("div",{className:"c-chart__tooltip-metadata-item",children:[o.jsxs("span",{className:"c-chart__tooltip-metadata-key",children:[I,":"]}),o.jsx("span",{className:"c-chart__tooltip-metadata-value",children:String(L)})]},I))})]})]})}):null});oe.displayName="ChartTooltip";const ge=e.memo(e.forwardRef(({datasets:w=[],config:t={},lineOptions:a={},onDataPointClick:f,onRealTimeUpdate:k,onZoomChange:P,onPanChange:Y,onBrushSelection:S,...N},I)=>{var x,m,l,y;const{processedDatasets:L,generateSmoothPath:M,handlePointHover:b,handlePointLeave:p,hoveredPoint:s}=Se(w,a),n=e.useCallback(({scales:i,colors:v,datasets:g,handlers:j})=>g.length?g.map((F,T)=>{var u,c,r,C;const B=F.color||v[T],A=((u=F.data)==null?void 0:u.map((d,E)=>{var D;return{x:i.xScale(E,(D=F.data)==null?void 0:D.length),y:i.yScale(d.value)}}))||[],G=a.smooth?M(A):`M ${A.map(d=>`${d.x},${d.y}`).join(" L ")}`;return o.jsxs("g",{children:[a.showArea&&o.jsx("path",{d:`${G} L ${((c=A[A.length-1])==null?void 0:c.x)||0},${i.yScale(0)} L ${((r=A[0])==null?void 0:r.x)||0},${i.yScale(0)} Z`,fill:B,className:"c-chart__area-path"}),o.jsx("path",{d:G,stroke:B,fill:"none",className:"c-chart__line-path"}),a.showDataPoints&&((C=F.data)==null?void 0:C.map((d,E)=>{var $;const D=i.xScale(E,($=F.data)==null?void 0:$.length),h=i.yScale(d.value),_=(s==null?void 0:s.datasetIndex)===T&&(s==null?void 0:s.pointIndex)===E;return o.jsx("circle",{cx:D,cy:h,r:a.pointRadius||4,fill:B,className:`c-chart__data-point ${_?"c-chart__data-point--hovered":""}`,onClick:()=>{var z;return(z=j.onDataPointClick)==null?void 0:z.call(j,d,T,E)},onMouseEnter:z=>{var R;const X=(R=z.currentTarget.ownerSVGElement)==null?void 0:R.getBoundingClientRect();X?X.left+D:z.clientX,X?X.top+h:z.clientY,b(T,E,D,h)},onMouseLeave:p},`point-${E}`)}))]},`dataset-${T}`)}):null,[a,M,s,b,p]);return o.jsxs(ne,{ref:I,type:"line",datasets:w,config:t,toolbarConfig:{defaults:{zoom:!0,pan:!0,reset:!0,grid:!0,tooltips:!0}},...N,children:[o.jsx(re,{datasets:L,config:t,onDataPointClick:f,renderContent:n}),s&&((m=(x=L[s.datasetIndex])==null?void 0:x.data)==null?void 0:m[s.pointIndex])&&o.jsx(oe,{dataPoint:L[s.datasetIndex].data[s.pointIndex],datasetLabel:(l=L[s.datasetIndex])==null?void 0:l.label,datasetColor:(y=L[s.datasetIndex])==null?void 0:y.color,position:{x:s.x,y:s.y},visible:!0})]})}));ge.displayName="LineChart";const ye=e.memo(e.forwardRef(({areaOptions:w={},...t},a)=>{const f={showArea:!0,fillOpacity:.3,useGradient:!0,...w};return o.jsx(ge,{ref:a,lineOptions:f,...t})}));ye.displayName="AreaChart";function ve(w,t={}){const[a,f]=e.useState(null),[k,P]=e.useState(0),[Y,S]=e.useState(!1),N=e.useCallback((n,x,m,l={top:20,right:30,bottom:40,left:50},y=!1)=>{var c,r;if(!n.length)return[];const i=x-l.left-l.right,v=m-l.top-l.bottom,g=((r=(c=n[0])==null?void 0:c.data)==null?void 0:r.length)||0,j=n.length;if(g===0)return[];const F=n.flatMap(C=>{var d;return((d=C.data)==null?void 0:d.map(E=>E.value).filter(E=>typeof E=="number"))||[]}),T=Math.min(0,...F),A=Math.max(...F)-T,G=[],u=Array(g).fill(0);return n.forEach((C,d)=>{var E;(E=C.data)==null||E.forEach((D,h)=>{const _=typeof D.value=="number"?D.value:0;if(isNaN(_)||!isFinite(_))return;let $,z,X,R;if(y){const O=v/g,H=O*(1-(t.groupPadding||.2));R=t.stacked?H:H/j,z=l.top+h*O+(O-H)/2,t.stacked||(z+=d*R*(1+(t.barPadding||.05))),$=l.left,X=(_-T)/A*i,t.stacked&&d>0?($=l.left+(u[h]-T)/A*i,u[h]+=_):t.stacked&&(u[h]=_)}else{const O=i/g,H=O*(1-(t.groupPadding||.2));if(X=t.stacked?H:H/j,$=l.left+h*O+(O-H)/2,t.stacked||($+=d*X*(1+(t.barPadding||.05))),R=(_-T)/A*v,z=m-l.bottom-R,t.stacked&&d>0){const q=(u[h]-T)/A*v;z=m-l.bottom-q-R,u[h]+=_}else t.stacked&&(u[h]=_)}if(t.minBarHeight&&(y?X:R)<t.minBarHeight&&(y?X=t.minBarHeight:(R=t.minBarHeight,z=m-l.bottom-R)),t.maxBarWidth&&(y?R:X)>t.maxBarWidth)if(y)R=t.maxBarWidth,z=l.top+h*(v/g)+(v/g-R)/2;else{X=t.maxBarWidth;const O=(x-l.left-l.right)/g;$=l.left+h*O+(O-X)/2}G.push({x:Math.max($,0),y:Math.max(z,0),width:Math.max(X,0),height:Math.max(R,0),value:_,datasetIndex:d,pointIndex:h})})}),G},[t.stacked,t.groupPadding,t.barPadding,t.minBarHeight,t.maxBarWidth]),I=e.useCallback(()=>{if(!t.enableAnimations)return;S(!0),P(0);const n=t.animationDuration||1e3,x=Date.now(),m=()=>{const l=Date.now()-x,y=Math.min(l/n,1),i=1-Math.pow(1-y,3);P(i),y<1?requestAnimationFrame(m):S(!1)};requestAnimationFrame(m)},[t.enableAnimations,t.animationDuration]),L=e.useCallback((n,x,m,l)=>{f({datasetIndex:n,pointIndex:x,x:m,y:l})},[]),M=e.useCallback(()=>{f(null)},[]),b=e.useCallback(n=>t.useGradients?n.map((x,m)=>{const l=x.color||`var(--atomix-color-${m+1})`;return{id:`bar-gradient-${m}`,stops:[{offset:"0%",color:l,opacity:.8},{offset:"100%",color:l,opacity:.4}]}}):[],[t.useGradients]),p=e.useCallback(n=>t.valueFormatter?t.valueFormatter(n):n.toString(),[t.valueFormatter]),s=e.useCallback((n,x=!1)=>{const{x:m,y:l,width:y,height:i}=n;switch(t.dataLabelPosition){case"inside":return{x:m+y/2,y:l+i/2};case"outside":return{x:x?m+y+5:m+y/2,y:x?l+i/2:l-5};case"center":default:return{x:m+y/2,y:l+i/2}}},[t.dataLabelPosition]);return{hoveredBar:a,animationProgress:k,isAnimating:Y,calculateBarDimensions:N,generateGradients:b,getDataLabelPosition:s,handleBarHover:L,handleBarLeave:M,startAnimation:I,formatValue:p,setHoveredBar:f,setAnimationProgress:P,setIsAnimating:S}}const Ae=e.memo(e.forwardRef(({datasets:w=[],config:t={},barOptions:a={},horizontal:f=!1,onDataPointClick:k,...P},Y)=>{var p,s,n,x;const{calculateBarDimensions:S,handleBarHover:N,handleBarLeave:I,hoveredBar:L,formatValue:M}=ve(w,a),b=e.useCallback(({scales:m,colors:l,datasets:y,handlers:i})=>y.length?S(y,m.width,m.height,m.padding,f).map((g,j)=>{var G;const F=y[g.datasetIndex],T=(G=F.data)==null?void 0:G[g.pointIndex],B=F.color||l[g.datasetIndex],A=(L==null?void 0:L.datasetIndex)===g.datasetIndex&&(L==null?void 0:L.pointIndex)===g.pointIndex;return o.jsxs("g",{children:[o.jsx("rect",{x:g.x,y:g.y,width:g.width,height:g.height,fill:B,rx:a.cornerRadius||4,className:`c-chart__bar ${A?"c-chart__bar--hovered":""}`,onClick:()=>{var u;return T&&((u=i.onDataPointClick)==null?void 0:u.call(i,T,g.datasetIndex,g.pointIndex))},onMouseMove:u=>{var d;const c=(d=u.currentTarget.ownerSVGElement)==null?void 0:d.getBoundingClientRect(),r=c?c.left+g.x+g.width/2:u.clientX,C=u.clientY;N(g.datasetIndex,g.pointIndex,r,C)},onMouseLeave:I}),a.showValues&&o.jsx("text",{x:g.x+g.width/2,y:g.y-5,textAnchor:"middle",className:"c-chart__bar-value-label",children:M(g.value)})]},`bar-${j}`)}):null,[S,f,a,L,N,I,M]);return o.jsxs(ne,{ref:Y,type:f?"horizontal-bar":"bar",datasets:w,config:t,...P,children:[o.jsx(re,{datasets:w,config:t,onDataPointClick:k,renderContent:b}),L&&o.jsx(oe,{dataPoint:((s=(p=w[L.datasetIndex])==null?void 0:p.data)==null?void 0:s[L.pointIndex])||{label:"",value:0},datasetLabel:(n=w[L.datasetIndex])==null?void 0:n.label,datasetColor:(x=w[L.datasetIndex])==null?void 0:x.color,position:{x:L.x,y:L.y},visible:!0})]})}));Ae.displayName="BarChart";const we=e.memo(e.forwardRef(({datasets:w=[],config:t={},pieOptions:a={showValues:!1,showPercentages:!0,showLabels:!1,startAngle:0,sortByValue:!1,padAngle:1},donutOptions:f={innerRadiusRatio:.6,showTotal:!0,centerLabel:"Total",centerValue:void 0,roundedCorners:!0},onDataPointClick:k,...P},Y)=>{var b;const S=w.length>0?w[0]:{label:"",data:[]},[N,I]=e.useState(null),L=e.useMemo(()=>{var A,G;if(!((A=S==null?void 0:S.data)!=null&&A.length))return null;const p=(G=S==null?void 0:S.data)==null?void 0:G.filter(u=>typeof u.value=="number"&&!isNaN(u.value)&&isFinite(u.value)&&u.value>0);if(!p.length)return null;const s=800,n=400,x=Math.min(s,n)/2*.8,m=x*(f.innerRadiusRatio??.6),l=s/2,y=n/2,i=["#7AFFD7","#1AFFD2","#00E6C3","#4DFF9F","#1AFF85","#00E66B","#DD6061","#FF1A1A","#E60000","#FFCC00","#E6B800","#B38F00"];let v=[...p];a.sortByValue&&v.sort((u,c)=>c.value-u.value);const g=v.reduce((u,c)=>u+c.value,0);if(g<=0||!isFinite(g))return null;const j=[];let F=(a.startAngle??0)*Math.PI/180;v.forEach((u,c)=>{const r=u.value/g;if(!isFinite(r)||r<0)return;const C=r*2*Math.PI-(a.padAngle??1)*Math.PI/180;if(!isFinite(C)||C<0)return;const d=F+C;!isFinite(F)||!isFinite(d)||(j.push({dataPoint:u,index:c,startAngle:F,endAngle:d,color:u.color||i[c%i.length],percentage:r}),F=d+(a.padAngle??1)*Math.PI/180)});const T=j.map(u=>{const{startAngle:c,endAngle:r,color:C,dataPoint:d,index:E,percentage:D}=u,h=l+x*Math.cos(c),_=y+x*Math.sin(c),$=l+x*Math.cos(r),z=y+x*Math.sin(r),X=l+m*Math.cos(r),R=y+m*Math.sin(r),O=l+m*Math.cos(c),H=y+m*Math.sin(c),q=r-c>Math.PI?1:0,Z=[`M ${h},${_}`,`A ${x},${x} 0 ${q},1 ${$},${z}`,`L ${X},${R}`,`A ${m},${m} 0 ${q},0 ${O},${H}`,"Z"].join(" "),J=c+(r-c)/2,W=(x+m)/2,U=l+W*Math.cos(J),K=y+W*Math.sin(J),ee=`${Math.round(D*100)}%`;return o.jsxs("g",{children:[o.jsx("path",{d:Z,fill:C,className:"c-chart__donut-slice",onClick:()=>k==null?void 0:k(d,0,E),onMouseEnter:Q=>{var le;const te=(le=Q.currentTarget.ownerSVGElement)==null?void 0:le.getBoundingClientRect(),ae=te?te.left+U:Q.clientX,se=te?te.top+K:Q.clientY;I({index:E,clientX:ae,clientY:se})},onMouseLeave:()=>I(null),"data-tooltip":`${d.label}: ${d.value} (${ee})`}),a.showValues&&o.jsx("text",{x:U,y:K,textAnchor:"middle",dominantBaseline:"middle",className:"c-chart__donut-label",children:a.showPercentages?ee:d.value})]},`slice-${E}`)}),B=f.showTotal&&o.jsxs("g",{className:"c-chart__donut-center",children:[o.jsx("circle",{cx:l,cy:y,r:m,className:"c-chart__donut-center-bg"}),f.centerLabel&&o.jsx("text",{x:l,y:y-15,textAnchor:"middle",dominantBaseline:"middle",className:"c-chart__donut-center-label",children:f.centerLabel}),o.jsx("text",{x:l,y:y+(f.centerLabel?15:0),textAnchor:"middle",dominantBaseline:"middle",className:"c-chart__donut-center-value",children:f.centerValue!==void 0?f.centerValue:g})]});return o.jsx("svg",{width:"100%",height:"100%",viewBox:`0 0 ${s} ${n}`,preserveAspectRatio:"xMidYMid meet",children:o.jsxs("g",{children:[T,B]})})},[S,a,f,k]),M=e.useMemo(()=>{var x,m;if(!t.showLegend||!((x=S==null?void 0:S.data)!=null&&x.length))return null;const p=(m=S==null?void 0:S.data)==null?void 0:m.filter(l=>typeof l.value=="number"&&!isNaN(l.value)&&isFinite(l.value)&&l.value>0);if(!p.length)return null;const s=["#7AFFD7","#1AFFD2","#00E6C3","#4DFF9F","#1AFF85","#00E66B","#DD6061","#FF1A1A","#E60000","#FFCC00","#E6B800","#B38F00"],n=p.reduce((l,y)=>l+y.value,0);return n<=0||!isFinite(n)?null:o.jsx("div",{className:V.LEGEND_CLASS,children:p.map((l,y)=>{const i=Math.round(l.value/n*100);return isFinite(i)?o.jsxs("div",{className:V.LEGEND_ITEM_CLASS,onClick:()=>k==null?void 0:k(l,0,y),children:[o.jsx("div",{className:`${V.LEGEND_COLOR_CLASS} c-chart__legend-color`,style:{backgroundColor:l.color||s[y%s.length]}}),o.jsxs("span",{className:V.LEGEND_LABEL_CLASS,children:[l.label," ",a.showPercentages&&`(${i}%)`]})]},`legend-${y}`):null})})},[S,t.showLegend,a.showPercentages,k]);return o.jsxs(ne,{ref:Y,type:"donut",datasets:w,config:t,...P,children:[o.jsxs("div",{className:V.CANVAS_CLASS,children:[L,N&&((b=S==null?void 0:S.data)==null?void 0:b[N.index])&&o.jsx(oe,{dataPoint:S.data[N.index],datasetLabel:S.label,datasetColor:S.data[N.index].color,position:{x:N.clientX,y:N.clientY},visible:!0})]}),M]})}));we.displayName="DonutChart";const Me=e.memo(e.forwardRef(({value:w,min:t=0,max:a=100,config:f={},gaugeOptions:k={},...P},Y)=>{const{startAngle:S=225,endAngle:N=315,thickness:I=.3,showNeedle:L=!0,needleColor:M="var(--atomix-gray-8)",showValue:b=!0,valueFormatter:p=d=>d.toFixed(0),showMinMaxLabels:s=!0,showTicks:n=!0,majorTicks:x=5,minorTicks:m=4,colorZones:l=[{from:0,to:30,color:"var(--atomix-success)",label:"Good"},{from:30,to:70,color:"var(--atomix-warning)",label:"Warning"},{from:70,to:100,color:"var(--atomix-error)",label:"Critical"}],animate:y=!0,animationDuration:i=1e3,animationEasing:v="ease-out",useGradient:g=!0,label:j,labelPosition:F="bottom"}=k,[T,B]=e.useState(y?t:w),[A,G]=e.useState(null);e.useEffect(()=>{if(y){const d=Date.now(),E=T,h=Math.max(t,Math.min(a,w))-E,_=()=>{const $=Date.now()-d,z=Math.min($/i,1);let X=z;v==="ease-out"?X=1-Math.pow(1-z,3):v==="ease-in"?X=Math.pow(z,3):v==="ease-in-out"&&(X=z<.5?4*Math.pow(z,3):1-Math.pow(-2*z+2,3)/2);const R=E+h*X;B(R),z<1&&requestAnimationFrame(_)};requestAnimationFrame(_)}else B(w)},[w,t,a,y,i,v,T]);const u=e.useCallback(({scales:d,colors:E,handlers:D})=>{const h=d.width/2,_=d.height/2,$=Math.min(h,_)*.8,z=$*(1-I),X=S*Math.PI/180,R=N*Math.PI/180,O=R-X,H=(T-t)/(a-t),q=X+O*H,Z=[],J=c(h,_,$,z,S,N);if(Z.push(o.jsx("path",{d:J,className:"c-chart__gauge-background"},"background")),l.forEach((W,U)=>{const K=S+(W.from-t)/(a-t)*(N-S),ee=S+(W.to-t)/(a-t)*(N-S),Q=c(h,_,$,z,K,ee);let te=W.color;if(g){const ae=`gauge-gradient-${U}`;Z.push(o.jsx("defs",{children:o.jsxs("linearGradient",{id:ae,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",stopColor:W.color,stopOpacity:"0.8"}),o.jsx("stop",{offset:"100%",stopColor:W.color,stopOpacity:"1"})]})},`gradient-def-${U}`)),te=`url(#${ae})`}Z.push(o.jsx("path",{d:Q,fill:te,className:"c-chart__gauge-zone"},`zone-${U}`))}),n)for(let W=0;W<=x;W++){const U=S+W/x*(N-S),K=U*Math.PI/180,ee={x:h+Math.cos(K)*($-10),y:_+Math.sin(K)*($-10)},Q={x:h+Math.cos(K)*$,y:_+Math.sin(K)*$};Z.push(o.jsx("line",{x1:ee.x,y1:ee.y,x2:Q.x,y2:Q.y,className:"c-chart__gauge-tick c-chart__gauge-tick--major"},`major-tick-${W}`));const te=t+W/x*(a-t),ae=$+15,se=h+Math.cos(K)*ae,le=_+Math.sin(K)*ae;if(Z.push(o.jsx("text",{x:se,y:le,textAnchor:"middle",dominantBaseline:"middle",className:"c-chart__gauge-tick-label",children:te.toFixed(0)},`tick-label-${W}`)),W<x)for(let ce=1;ce<=m;ce++){const ie=(U+ce/(m+1)*((N-S)/x))*Math.PI/180,ue={x:h+Math.cos(ie)*($-5),y:_+Math.sin(ie)*($-5)},de={x:h+Math.cos(ie)*$,y:_+Math.sin(ie)*$};Z.push(o.jsx("line",{x1:ue.x,y1:ue.y,x2:de.x,y2:de.y,className:"c-chart__gauge-tick c-chart__gauge-tick--minor"},`minor-tick-${W}-${ce}`))}}if(s){const W=$+30,U=$+30,K=h+Math.cos(X)*W,ee=_+Math.sin(X)*W,Q=h+Math.cos(R)*U,te=_+Math.sin(R)*U;Z.push(o.jsx("text",{x:K,y:ee,textAnchor:"middle",dominantBaseline:"middle",className:"c-chart__gauge-min-max-label",children:t},"min-label")),Z.push(o.jsx("text",{x:Q,y:te,textAnchor:"middle",dominantBaseline:"middle",className:"c-chart__gauge-min-max-label",children:a},"max-label"))}if(L){const W=$*.8,U=h+Math.cos(q)*W,K=_+Math.sin(q)*W;Z.push(o.jsxs("g",{className:"c-chart__gauge-needle",children:[o.jsx("line",{x1:h,y1:_,x2:U,y2:K,stroke:M,className:"c-chart__gauge-needle-line"}),o.jsx("circle",{cx:h,cy:_,r:"6",fill:M,className:"c-chart__gauge-needle-center",onMouseEnter:ee=>{var se;const Q=(se=ee.currentTarget.ownerSVGElement)==null?void 0:se.getBoundingClientRect(),te=Q?Q.left+h:ee.clientX,ae=Q?Q.top+_:ee.clientY;G({clientX:te,clientY:ae})},onMouseLeave:()=>G(null)})]},"needle"))}if(b){let W=_;F==="top"&&(W=_-20),F==="bottom"&&(W=_+20),Z.push(o.jsx("text",{x:h,y:W,textAnchor:"middle",dominantBaseline:"middle",className:"c-chart__gauge-value",children:p(T)},"value-text"))}if(j){let W=_+40;F==="top"&&(W=_-40),F==="center"&&(W=_+10),Z.push(o.jsx("text",{x:h,y:W,textAnchor:"middle",dominantBaseline:"middle",className:"c-chart__gauge-label",children:j},"custom-label"))}return o.jsx("g",{children:Z})},[T,t,a,S,N,I,L,M,b,p,s,n,x,m,l,g,j,F]),c=(d,E,D,h,_,$)=>{const z=r(d,E,D,$),X=r(d,E,D,_),R=r(d,E,h,$),O=r(d,E,h,_),H=$-_<=180?"0":"1";return["M",z.x,z.y,"A",D,D,0,H,0,X.x,X.y,"L",O.x,O.y,"A",h,h,0,H,1,R.x,R.y,"Z"].join(" ")},r=(d,E,D,h)=>{const _=h*Math.PI/180;return{x:d+D*Math.cos(_),y:E+D*Math.sin(_)}},C=[{label:"Gauge Value",data:[{label:"Current",value:T}]}];return o.jsxs(ne,{ref:Y,type:"gauge",datasets:C,config:f,...P,children:[o.jsx(re,{datasets:C,config:f,renderContent:u}),A&&o.jsx(oe,{dataPoint:{label:j||"Current Value",value:T,metadata:{min:t,max:a,percentage:((T-t)/(a-t)*100).toFixed(1)+"%"}},datasetLabel:"Gauge",position:{x:A.clientX,y:A.clientY},visible:!0})]})}));Me.displayName="GaugeChart";function ke(w,t={}){const[a,f]=e.useState(null),[k,P]=e.useState(new Set),[Y,S]=e.useState(0),[N,I]=e.useState(!1),L=e.useMemo(()=>{const i=w.filter(v=>typeof v.value=="number"&&!isNaN(v.value)&&isFinite(v.value)&&v.value>0);return i.length?t.sortByValue?[...i].sort((v,g)=>g.value-v.value):i:[]},[w,t.sortByValue]),M=e.useMemo(()=>L.reduce((i,v)=>i+v.value,0),[L]),b=e.useMemo(()=>{if(!L.length||M<=0)return[];const i=400,v=200,g=150,j=g*(t.innerRadius||0),F=["#7AFFD7","#1AFFD2","#00E6C3","#4DFF9F","#1AFF85","#00E66B","#DD6061","#FF1A1A","#E60000","#FFCC00","#E6B800","#B38F00"];let T=(t.startAngle||0)*Math.PI/180;const B=(t.padAngle||1)*Math.PI/180;return L.map((A,G)=>{const u=A.value/M,c=u*2*Math.PI-B,r=T+c,C=T+c/2,d=i+g*Math.cos(T),E=v+g*Math.sin(T),D=i+g*Math.cos(r),h=v+g*Math.sin(r),_=c>Math.PI?1:0;let $;if(j>0){const H=i+j*Math.cos(r),q=v+j*Math.sin(r),Z=i+j*Math.cos(T),J=v+j*Math.sin(T);$=[`M ${d},${E}`,`A ${g},${g} 0 ${_},1 ${D},${h}`,`L ${H},${q}`,`A ${j},${j} 0 ${_},0 ${Z},${J}`,"Z"].join(" ")}else $=[`M ${i},${v}`,`L ${d},${E}`,`A ${g},${g} 0 ${_},1 ${D},${h}`,"Z"].join(" ");const z=(g+j)/2||g*.7,X=i+z*Math.cos(C),R=v+z*Math.sin(C),O={dataPoint:A,index:G,startAngle:T,endAngle:r,midAngle:C,color:A.color||F[G%F.length],percentage:u*100,value:A.value,label:A.label,path:$,labelPosition:{x:X,y:R}};return T=r+B,O})},[L,M,t.innerRadius,t.startAngle,t.padAngle]),p=e.useCallback(()=>{if(!t.enableAnimations)return;I(!0),S(0);const i=t.animationDuration||1e3,v=Date.now(),g=()=>{const j=Date.now()-v,F=Math.min(j/i,1),T=1-Math.pow(1-F,3);S(T),F<1?requestAnimationFrame(g):I(!1)};requestAnimationFrame(g)},[t.enableAnimations,t.animationDuration]),s=e.useCallback((i,v,g)=>{t.enableHoverEffects&&(f(i),v!==void 0&&g!==void 0&&b[i]&&(b[i].clientX=v,b[i].clientY=g))},[t.enableHoverEffects,b]),n=e.useCallback(()=>{f(null)},[]),x=e.useCallback(i=>{t.enableSelection&&P(v=>{const g=new Set(v);return g.has(i)?g.delete(i):g.add(i),g})},[t.enableSelection]),m=e.useCallback(i=>{if(t.labelFormatter)return t.labelFormatter(i.value,i.percentage,i.label);const v=[];return t.showLabels!==!1&&v.push(i.label),t.showPercentages&&v.push(`${Math.round(i.percentage)}%`),t.showValues&&v.push(i.value.toString()),v.join(" - ")},[t.labelFormatter,t.showLabels,t.showPercentages,t.showValues]),l=e.useCallback((i,v)=>{if(!v||!t.enableHoverEffects||!t.hoverOffset)return"";const g=Math.cos(i.midAngle)*t.hoverOffset,j=Math.sin(i.midAngle)*t.hoverOffset;return`translate(${g}, ${j})`},[t.enableHoverEffects,t.hoverOffset]),y=e.useCallback(i=>k.has(i),[k]);return{processedData:L,slices:b,totalValue:M,hoveredSlice:a,selectedSlices:k,animationProgress:Y,isAnimating:N,handleSliceHover:s,handleSliceLeave:n,handleSliceClick:x,startAnimation:p,formatLabel:m,getSliceTransform:l,isSliceSelected:y,setHoveredSlice:f,setSelectedSlices:P,setAnimationProgress:S,setIsAnimating:I}}const Ee=e.memo(e.forwardRef(({datasets:w=[],config:t={},pieOptions:a={},onDataPointClick:f,...k},P)=>{var n,x,m,l,y;const Y=((n=w[0])==null?void 0:n.data)||[],{slices:S,handleSliceHover:N,handleSliceLeave:I,handleSliceClick:L,formatLabel:M,hoveredSlice:b,selectedSlices:p}=ke(Y,a),s=e.useCallback(()=>S.length?S.map((i,v)=>{const g=b===v,j=p.has(v);return o.jsxs("g",{children:[o.jsx("path",{d:i.path,fill:i.color,className:`c-chart__pie-slice ${g?"c-chart__pie-slice--hovered":""} ${j?"c-chart__pie-slice--selected":""}`,onClick:()=>{L(v),f==null||f(i.dataPoint,0,v)},onMouseEnter:F=>{var G;const T=(G=F.currentTarget.ownerSVGElement)==null?void 0:G.getBoundingClientRect(),B=T?T.left+i.labelPosition.x:F.clientX,A=T?T.top+i.labelPosition.y:F.clientY;N(v,B,A)},onMouseLeave:I}),a.showLabels&&o.jsx("text",{x:i.labelPosition.x,y:i.labelPosition.y,textAnchor:"middle",className:"c-chart__pie-label",children:M(i)})]},`slice-${v}`)}):null,[S,b,p,a.showLabels,L,N,I,M,f]);return o.jsxs(ne,{ref:P,type:"pie",datasets:w,config:t,...k,children:[o.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 800 400",children:s()}),b!==null&&Y[b]&&o.jsx(oe,{dataPoint:Y[b],datasetLabel:(x=w[0])==null?void 0:x.label,datasetColor:(m=S[b])==null?void 0:m.color,position:{x:((l=S[b])==null?void 0:l.clientX)||0,y:((y=S[b])==null?void 0:y.clientY)||0},visible:!0})]})}));Ee.displayName="PieChart";const Te=e.memo(e.forwardRef(({datasets:w=[],config:t={},streamConfig:a={interval:1e3,maxDataPoints:100,autoScroll:!0,bufferSize:10},dataSource:f,websocketUrl:k,onDataUpdate:P,enablePerformanceMonitoring:Y=!1,...S},N)=>{const[I,L]=e.useState(w),[M,b]=e.useState(!1),[p,s]=e.useState({fps:0,updateTime:0,dataPoints:0}),n=e.useRef(null),x=e.useRef(null),m=e.useRef(0),l=e.useRef(Date.now()),y=e.useRef([]),i=e.useCallback(()=>{if(!Y)return;const A=Date.now(),G=A-l.current;if(G>=1e3){const u=Math.round(m.current*1e3/G);s(c=>({...c,fps:u,dataPoints:I.reduce((r,C)=>{var d;return r+(((d=C.data)==null?void 0:d.length)||0)},0)})),m.current=0,l.current=A}m.current++},[Y,I]),v=e.useCallback(()=>{if(y.current.length===0)return;const A=performance.now();L(u=>{const c=[...u];return y.current.forEach(r=>{r.forEach((C,d)=>{c[d]||(c[d]={label:`Dataset ${d+1}`,data:[],color:`hsl(${d*60}, 70%, 50%)`});const E=c[d],D=E.data||[],h={...C,timestamp:C.timestamp||Date.now()};D.push(h),D.length>a.maxDataPoints&&D.splice(0,D.length-a.maxDataPoints),E.data=D})}),c}),y.current=[];const G=performance.now();s(u=>({...u,updateTime:G-A})),P==null||P(I),i()},[a.maxDataPoints,P,I,i]),g=e.useCallback(()=>{if(k)try{x.current=new WebSocket(k),x.current.onopen=()=>{b(!0)},x.current.onmessage=A=>{try{const G=JSON.parse(A.data);y.current.push(Array.isArray(G)?G:[G])}catch(G){console.error("Error parsing WebSocket data:",G)}},x.current.onclose=()=>{b(!1)},x.current.onerror=A=>{console.error("WebSocket error:",A),b(!1)}}catch(A){console.error("Error connecting to WebSocket:",A)}},[k]),j=e.useCallback(()=>{f&&(n.current=setInterval(async()=>{try{const A=await f();A&&A.length>0&&y.current.push(A)}catch(A){console.error("Error fetching data:",A)}},a.interval),b(!0))},[f,a.interval]),F=e.useCallback(()=>{k?g():f&&j()},[k,f,g,j]),T=e.useCallback(()=>{b(!1),n.current&&(clearInterval(n.current),n.current=null),x.current&&(x.current.close(),x.current=null)},[]);e.useEffect(()=>{const A=setInterval(v,a.interval/4);return()=>clearInterval(A)},[v,a.interval]),e.useEffect(()=>((f||k)&&F(),()=>{T()}),[f,k,F,T]);const B=e.useCallback(({scales:A,colors:G,datasets:u,handlers:c})=>u.length?u.map((r,C)=>{var h,_;const d=r.color||G[C],E=((h=r.data)==null?void 0:h.map(($,z)=>{var X;return{x:A.xScale(z,(X=r.data)==null?void 0:X.length),y:A.yScale($.value),timestamp:$.timestamp}}))||[],D=E.length>1?`M ${E.map($=>`${$.x},${$.y}`).join(" L ")}`:"";return o.jsxs("g",{children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:`gradient-${C}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",stopColor:d,stopOpacity:"0.1"}),o.jsx("stop",{offset:"100%",stopColor:d,stopOpacity:"0.8"})]})}),o.jsx("path",{d:D,stroke:`url(#gradient-${C})`,fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(_=r.data)==null?void 0:_.map(($,z)=>{var H,q;const X=A.xScale(z,(H=r.data)==null?void 0:H.length),R=A.yScale($.value),O=z===(((q=r.data)==null?void 0:q.length)||0)-1;return o.jsxs("g",{children:[O&&o.jsxs("circle",{cx:X,cy:R,r:"8",fill:d,opacity:"0.3",children:[o.jsx("animate",{attributeName:"r",values:"4;12;4",dur:"2s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"opacity",values:"0.8;0.1;0.8",dur:"2s",repeatCount:"indefinite"})]}),o.jsx("circle",{cx:X,cy:R,r:"3",fill:d,stroke:"white",strokeWidth:"1",onClick:()=>{var Z;return(Z=c.onDataPointClick)==null?void 0:Z.call(c,$,C,z)},style:{cursor:"pointer"}})]},`point-${z}`)})]},`realtime-dataset-${C}`)}):null,[]);return o.jsxs(ne,{ref:N,type:"line",datasets:I,config:t,title:`Real-time Chart ${M?"ðŸ”´ LIVE":"â¸ï¸ PAUSED"}`,showToolbar:!0,enableRefresh:!0,onRefresh:F,...S,children:[o.jsx(re,{datasets:I,config:t,renderContent:B,enableRealTime:!0,enablePerformanceOptimization:!0}),Y&&o.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"8px",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[o.jsxs("div",{children:["FPS: ",p.fps]}),o.jsxs("div",{children:["Update: ",p.updateTime.toFixed(2),"ms"]}),o.jsxs("div",{children:["Points: ",p.dataPoints]}),o.jsxs("div",{children:["Status: ",M?"STREAMING":"STOPPED"]})]}),o.jsxs("div",{style:{position:"absolute",bottom:"10px",left:"10px",display:"flex",gap:"8px"},children:[o.jsx("button",{onClick:M?T:F,style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:M?"#ef4444":"#10b981",color:"white",cursor:"pointer",fontSize:"12px"},children:M?"Stop":"Start"}),o.jsx("button",{onClick:()=>L([]),style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:"#6b7280",color:"white",cursor:"pointer",fontSize:"12px"},children:"Clear"})]})]})}));Te.displayName="RealTimeChart";export{ye as A,Ae as B,ne as C,we as D,Me as G,ge as L,Ee as P,Te as R,re as a,oe as b};
